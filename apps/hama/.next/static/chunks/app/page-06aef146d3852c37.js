(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5276:function(e,t,n){Promise.resolve().then(n.bind(n,2688))},3123:function(e,t,n){"use strict";n.d(t,{X:function(){return l}});var o=n(7653),r=n(5708),i=n(5099);function l(){let[e,t]=(0,o.useState)([]),[n,l]=(0,o.useState)(!1),a=(0,i.n)(),s=(0,o.useCallback)(async()=>{if(!(!a||a.startsWith("server"))){l(!0);try{var e;let n=await fetch("/api/recent?user_id=".concat(encodeURIComponent(a),"&limit=20")),o=await n.json(),i=null!==(e=o.stores)&&void 0!==e?e:[];t(i.map(e=>(0,r.O)(e)))}catch(e){t([])}finally{l(!1)}}},[a]),u=(0,o.useCallback)(async e=>{if(!(!a||a.startsWith("server")))try{await fetch("/api/recent/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a,store_id:e})}),await s()}catch(e){}},[a,s]);return(0,o.useEffect)(()=>{s()},[s]),{recentCards:e,loading:n,recordView:u,refetch:s}}},5142:function(e,t,n){"use strict";n.d(t,{F:function(){return l}});var o=n(7653),r=n(5708),i=n(5099);function l(){let[e,t]=(0,o.useState)(new Set),[n,l]=(0,o.useState)([]),[a,s]=(0,o.useState)(!1),u=(0,i.n)(),d=(0,o.useCallback)(async()=>{if(!(!u||u.startsWith("server"))){s(!0);try{var e,n;let o=await fetch("/api/saved?user_id=".concat(encodeURIComponent(u))),i=await o.json();t(new Set(null!==(e=i.saved_ids)&&void 0!==e?e:[])),l((null!==(n=i.stores)&&void 0!==n?n:[]).map(e=>(0,r.O)(e)))}catch(e){t(new Set),l([])}finally{s(!1)}}},[u]),c=(0,o.useCallback)(async n=>{if(!u||u.startsWith("server"))return!1;let o=e.has(n);t(e=>{let t=new Set(e);return o?t.delete(n):t.add(n),t});try{let e=await fetch("/api/saved",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:u,store_id:n})}),r=await e.json();if(!r.ok)return t(e=>{let t=new Set(e);return o?t.add(n):t.delete(n),t}),o;return r.saved}catch(e){return t(e=>{let t=new Set(e);return o?t.add(n):t.delete(n),t}),o}},[u,e]),g=(0,o.useCallback)(t=>e.has(t),[e]);return(0,o.useEffect)(()=>{d()},[d]),{savedIds:e,savedCards:n,loading:a,toggleSaved:c,isSaved:g,refetch:d}}},1342:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let o="hama_session_id";function r(){try{let r=window.localStorage.getItem(o);if(!r){var e,t,n;r=null!==(n=null===(e=(t=crypto).randomUUID)||void 0===e?void 0:e.call(t))&&void 0!==n?n:"sess_".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,10)),window.localStorage.setItem(o,r)}return r}catch(e){return""}}},5099:function(e,t,n){"use strict";n.d(t,{n:function(){return r}});var o=n(1342);function r(){try{let e=window.localStorage.getItem("hamaLoggedIn");if("1"===e){let e=window.localStorage.getItem("hamaUser");if(e){let t=JSON.parse(e),n=null==t?void 0:t.user_id;if(n)return"user_".concat(n)}}return"session_".concat((0,o.Z)())}catch(e){return"session_".concat((0,o.Z)())}}},7467:function(e,t,n){"use strict";n.d(t,{A:function(){return a},UIOverlayProvider:function(){return l}});var o=n(7573),r=n(7653);let i=(0,r.createContext)(null);function l(e){let{children:t}=e,[n,l]=(0,r.useState)(!1),a=(0,r.useMemo)(()=>({overlayOpen:n,setOverlayOpen:l}),[n]);return(0,o.jsx)(i.Provider,{value:a,children:t})}function a(){let e=(0,r.useContext)(i);if(!e)throw Error("useUIOverlay must be used within UIOverlayProvider");return e}},2643:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});var o=n(5099),r=n(1342);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{window.__HAMA_LOGS__=window.__HAMA_LOGS__||[],window.__HAMA_LOGS__.push({event:e,payload:t,ts:Date.now()});let n=(0,o.n)(),i=(0,r.Z)(),l=n.startsWith("user_");fetch("/api/log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:l?n:null,session_id:i||"unknown",type:e,data:t})}).catch(()=>{})}catch(e){}}},5708:function(e,t,n){"use strict";function o(e){let t=String(null!=e?e:"").toLowerCase().trim();return"beauty"===t?"salon":"fd6"===t?"restaurant":"ce7"===t?"cafe":"bk9"===t?"salon":"at4"===t?"activity":t.includes("미용")||t.includes("헤어")||t.includes("이발")?"salon":t.includes("카페")||t.includes("커피")?"cafe":t.includes("식당")||t.includes("음식")||t.includes("레스토랑")||t.includes("맛집")?"restaurant":t.includes("액티비")||t.includes("활동")||t.includes("체험")||t.includes("공원")?"activity":"restaurant"===t||"cafe"===t||"salon"===t||"activity"===t?t:"restaurant"}function r(e){var t,n,r,i,l,a,s,u,d,c,g,f,p,m,h,v,y,b,x,w,S,k,j,_,C,A,E,I,L,P,R,z,W,B,M,O,T,U;let N=String(null!==(r=null!==(n=null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null==e?void 0:e.store_id)&&void 0!==n?n:null==e?void 0:e.storeId)&&void 0!==r?r:"").trim(),F=String(null!==(a=null!==(l=null!==(i=null==e?void 0:e.name)&&void 0!==i?i:null==e?void 0:e.store_name)&&void 0!==l?l:null==e?void 0:e.storeName)&&void 0!==a?a:"").trim(),K=o(null!==(g=null!==(c=null!==(d=null!==(u=null!==(s=null==e?void 0:e.category)&&void 0!==s?s:null==e?void 0:e.categoryNorm)&&void 0!==u?u:null==e?void 0:e.category_norm)&&void 0!==d?d:null==e?void 0:e.tab)&&void 0!==c?c:null==e?void 0:e.type)&&void 0!==g?g:null==e?void 0:e.kind),D=String(null!==(p=null!==(f=null==e?void 0:e.categoryLabel)&&void 0!==f?f:null==e?void 0:e.category_label)&&void 0!==p?p:function(e){let t=o(e);return"restaurant"===t?"식당":"cafe"===t?"카페":"salon"===t?"미용실":"액티비티"}(K)),q=Number(null!==(h=null!==(m=null==e?void 0:e.distanceKm)&&void 0!==m?m:null==e?void 0:e.distance_km)&&void 0!==h?h:"number"==typeof(null==e?void 0:e.distance)?e.distance/1e3:void 0),H=Number.isFinite(q)?q:0,X=String(null!==(S=null!==(w=null!==(x=null!==(b=null!==(y=null!==(v=null==e?void 0:e.cover_image_url)&&void 0!==v?v:null==e?void 0:e.imageUrl)&&void 0!==y?y:null==e?void 0:e.image_url)&&void 0!==b?b:null==e?void 0:e.image)&&void 0!==x?x:null==e?void 0:e.thumbnail)&&void 0!==w?w:null==e?void 0:e.thumb)&&void 0!==S?S:""),J="number"==typeof(null==e?void 0:e.lat)?e.lat:"number"==typeof(null==e?void 0:e.latitude)?e.latitude:null!==(j=null!==(k=null==e?void 0:e.lat)&&void 0!==k?k:null==e?void 0:e.latitude)&&void 0!==j?j:null,G="number"==typeof(null==e?void 0:e.lng)?e.lng:"number"==typeof(null==e?void 0:e.longitude)?e.longitude:null!==(C=null!==(_=null==e?void 0:e.lng)&&void 0!==_?_:null==e?void 0:e.longitude)&&void 0!==C?C:null;return{id:N,name:F,category:K,categoryLabel:D,distanceKm:H,moodText:String(null!==(I=null!==(E=null!==(A=null==e?void 0:e.moodText)&&void 0!==A?A:null==e?void 0:e.mood_text)&&void 0!==E?E:null==e?void 0:e.mood)&&void 0!==I?I:""),imageUrl:X,quickQuery:String(null!==(P=null!==(L=null==e?void 0:e.quickQuery)&&void 0!==L?L:null==e?void 0:e.quick_query)&&void 0!==P?P:F),lat:J,lng:G,mood:null!==(R=null==e?void 0:e.mood)&&void 0!==R?R:null,withKids:null!==(W=null!==(z=null==e?void 0:e.withKids)&&void 0!==z?z:null==e?void 0:e.with_kids)&&void 0!==W?W:null,forWork:null!==(M=null!==(B=null==e?void 0:e.forWork)&&void 0!==B?B:null==e?void 0:e.for_work)&&void 0!==M?M:null,priceLevel:null!==(T=null!==(O=null==e?void 0:e.priceLevel)&&void 0!==O?O:null==e?void 0:e.price_level)&&void 0!==T?T:null,tags:null!==(U=null==e?void 0:e.tags)&&void 0!==U?U:null}}n.d(t,{O:function(){return r}})},191:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var o=n(3088),r=n(4859);let i=r.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",l=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder",a=(0,o.eI)(i,l)},2688:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var o=n(7573),r=n(7653),i=n(1695),l=n(294),a=n(2643);function s(){let e=(0,i.useRouter)(),t=(0,i.usePathname)();return"/map"===t||"/reserve"===t?null:(0,o.jsx)("button",{type:"button",onClick:()=>e.push("/feedback"),"aria-label":"feedback",style:{position:"fixed",right:18,bottom:22,zIndex:2500,width:56,height:56,borderRadius:999,border:"none",cursor:"pointer",background:"linear-gradient(135deg, #2563eb, #4f46e5)",boxShadow:"0 16px 32px rgba(37,99,235,0.35)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:900,fontSize:16},title:"피드백",children:"✎"})}var u=n(7467);function d(){let{overlayOpen:e}=(0,u.A)();return e?null:(0,o.jsx)("div",{style:{position:"fixed",left:"50%",bottom:24,transform:"translateX(-50%)",zIndex:9999,pointerEvents:"none",width:"auto",height:"auto"},children:(0,o.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("mic click")},style:{pointerEvents:"auto",width:72,height:72,borderRadius:9999,border:"none",cursor:"pointer",background:"white",boxShadow:"0 10px 30px rgba(0,0,0,0.18)"},"aria-label":"voice input",children:"\uD83C\uDFA4"})})}var c=n(8146);function g(e){let{isLoggedIn:t,nickname:n,points:i,onLoginClick:l,onGoPoints:a,onGoMy:s,onGoBeta:u}=e,[d,g]=r.useState(!1),[f,p]=r.useState({top:60,left:10}),m=(0,r.useRef)(null),h=()=>{if(!m.current)return;let e=m.current.getBoundingClientRect();p({top:e.bottom+8,left:e.left})};return(0,r.useEffect)(()=>{d&&h()},[d]),(0,r.useEffect)(()=>{let e=()=>d&&h();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[d]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:18},children:[(0,o.jsx)("button",{ref:m,type:"button",onClick:()=>g(e=>!e),"aria-label":"메뉴 열기",style:{width:42,height:42,borderRadius:999,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(15,23,42,0.12)",cursor:"pointer",fontSize:18},children:"☰"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,o.jsx)("div",{style:{fontWeight:900,letterSpacing:1.2,fontSize:22,color:"#2563EB"},children:"HAMA"}),(0,o.jsx)(c.default,{href:"/partner",style:{fontSize:13,fontWeight:700,color:"#1e40af",textDecoration:"none",padding:"6px 12px",borderRadius:999,background:"#dbeafe",border:"1px solid #93c5fd"},children:"매장주 대시보드"})]}),(0,o.jsx)("button",{type:"button",onClick:l,style:{height:42,borderRadius:999,border:"none",padding:"0 14px",background:t?"#111827":"#FEE500",color:t?"#ffffff":"#111827",fontWeight:800,cursor:"pointer",boxShadow:"0 6px 18px rgba(15,23,42,0.12)"},children:t?"로그아웃":"카카오 로그인"})]}),d&&(0,o.jsx)("div",{onClick:()=>g(!1),style:{position:"fixed",inset:0,zIndex:3e3,background:"transparent"},children:(0,o.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{position:"absolute",top:f.top,left:f.left,width:200,maxHeight:"min(70vh, 400px)",borderRadius:16,background:"#ffffff",boxShadow:"0 16px 40px rgba(15,23,42,0.18)",overflowY:"auto",overflowX:"hidden"},children:[(0,o.jsxs)("div",{style:{padding:"10px 12px",borderBottom:"1px solid #E5E7EB"},children:[(0,o.jsx)("div",{style:{fontSize:12,color:"#6B7280"},children:"닉네임"}),(0,o.jsx)("div",{style:{fontSize:14,fontWeight:800,color:"#111827"},children:n}),(0,o.jsxs)("div",{style:{marginTop:6,fontSize:12,color:"#2563EB",fontWeight:800},children:[i.toLocaleString(),"P"]})]}),(0,o.jsx)(c.default,{href:"/partner",onClick:()=>g(!1),style:{display:"block",width:"100%",padding:"12px 12px",textAlign:"left",background:"#EFF6FF",border:"none",borderBottom:"1px solid #E5E7EB",cursor:"pointer",fontSize:14,fontWeight:700,color:"#1d4ed8",textDecoration:"none"},children:"매장주 대시보드"}),(0,o.jsx)("button",{type:"button",onClick:()=>{g(!1),a()},style:{width:"100%",padding:"12px 12px",textAlign:"left",background:"transparent",border:"none",cursor:"pointer",fontSize:13,color:"#111827"},children:"포인트 내역"}),s&&(0,o.jsx)("button",{type:"button",onClick:()=>{g(!1),s()},style:{width:"100%",padding:"12px 12px",textAlign:"left",background:"transparent",border:"none",cursor:"pointer",fontSize:13,color:"#111827"},children:"저장\xb7최근본"}),(0,o.jsx)("button",{type:"button",onClick:()=>{g(!1),u()},style:{width:"100%",padding:"12px 12px",textAlign:"left",background:"transparent",border:"none",cursor:"pointer",fontSize:13,color:"#111827"},children:"베타 안내"})]})})]})}function f(e){let{query:t,onChange:n,onSubmit:r}=e;return(0,o.jsxs)("form",{onSubmit:r,style:{display:"flex",alignItems:"center",gap:10,borderRadius:999,padding:"10px 12px",boxShadow:"0 10px 30px rgba(15,23,42,0.10)",marginBottom:14,background:"#ffffff"},children:[(0,o.jsx)("span",{style:{fontSize:16},children:"\uD83D\uDD0E"}),(0,o.jsx)("input",{value:t,onChange:e=>n(e.target.value),placeholder:"근처 카페 찾아줘 / 점심 뭐 먹지",style:{flex:1,border:"none",outline:"none",fontSize:14.5,fontWeight:600,background:"transparent",padding:"0 2px"}}),(0,o.jsx)("button",{type:"submit",style:{height:36,padding:"0 16px",borderRadius:999,border:"none",cursor:"pointer",background:"linear-gradient(135deg, #38bdf8, #2563eb)",color:"#ffffff",fontWeight:800,boxShadow:"0 10px 18px rgba(37,99,235,0.22)"},children:"검색"})]})}let p={restaurant:"/images/category/restaurant.jpg",restaurant_korean:"/images/category/restaurant-korean.jpg",restaurant_chinese:"/images/category/restaurant-chinese.jpg",restaurant_japanese:"/images/category/restaurant-japanese.jpg",restaurant_western:"/images/category/restaurant-western.jpg",cafe:"/images/category/cafe.jpg",activity:"/images/category/activity.jpg",museum:"/images/category/museum.jpg",salon:"/images/category/salon.jpg",park:"/images/category/park.png"};function m(e){return(null!=e?e:"").trim().toLowerCase()}function h(e,t){return t.some(t=>e.includes(t))}function v(e){let t=e.imageUrl||e.image_url||e.image||e.imageURL;if(t&&"string"==typeof t&&t.trim().length>0)return t;let n=m(e.category);if("cafe"===n)return p.cafe;if("salon"===n)return p.salon;if("activity"===n){let t="".concat(m(e.name)," ").concat(m(e.categoryLabel)," ").concat(Array.isArray(e.tags)?m(e.tags.join(" ")):""," ").concat(m(e.moodText));return h(t,["박물관","전시","미술관","갤러리","museum"])?p.museum:h(t,["공원","산책","park"])?p.park:p.activity}return p[function(e){let t=m(null==e?void 0:e.name),n=m(null==e?void 0:e.categoryLabel),o=m(null==e?void 0:e.moodText),r=Array.isArray(null==e?void 0:e.mood)?e.mood.join(" "):"",i=Array.isArray(null==e?void 0:e.tags)?e.tags.join(" "):"",l="".concat(t," ").concat(n," ").concat(o," ").concat(m(r)," ").concat(m(i));return h(l,["한식","국밥","백반","김치","삼겹","갈비","찌개","비빔","냉면","분식","족발","보쌈"])?"restaurant_korean":h(l,["중식","짜장","짬뽕","탕수","마라","훠궈","딤섬","양꼬치"])?"restaurant_chinese":h(l,["일식","초밥","스시","라멘","돈까스","우동","사시미","이자카야","규카츠"])?"restaurant_japanese":h(l,["양식","파스타","스테이크","피자","브런치","그릴","바베큐","버거","샌드위치"])?"restaurant_western":"restaurant"}(e)]}function y(e){let{cards:t,homeTab:n,mode:i,isLoading:l,onOpenCard:s,onAddPoints:u}=e,[d,c]=(0,r.useState)([]);(0,r.useEffect)(()=>{Array.isArray(t)&&t.length>0&&c(t)},[t]);let g=(0,r.useMemo)(()=>l?[]:d.length>0?d:Array.isArray(t)?t:[],[l,d,t]),f=g.length,[p,m]=(0,r.useState)(0),[h,y]=(0,r.useState)(0),[b,x]=(0,r.useState)(!1),w=(0,r.useRef)(0),S=(0,r.useRef)(!1);(0,r.useEffect)(()=>{m(0),y(0),x(!1),S.current=!1},[n,i]),(0,r.useEffect)(()=>{f<=0||m(e=>Math.min(e,f-1))},[f]);let k=f>0&&p>0,j=f>0&&p<f-1,_=k?g[p-1]:null,C=f>0?g[p]:null,A=j?g[p+1]:null,E=(0,r.useMemo)(()=>"explore"===i?"지금 있는 곳 기준으로 가까운 장소를 보여드릴게요.":"하마가 자신 있는 지역 추천이에요.",[i]),I=(e,t,n)=>Math.max(t,Math.min(n,e)),L=()=>{k&&(m(e=>Math.max(0,e-1)),null==u||u(1,"카드 넘김"),(0,a.K)("home_card_swipe",{dir:"prev",tab:n,mode:i,index:p-1}))},P=()=>{j&&(m(e=>Math.min(f-1,e+1)),null==u||u(1,"카드 넘김"),(0,a.K)("home_card_swipe",{dir:"next",tab:n,mode:i,index:p+1}))},R=e=>{var t,n,o;if(!e)return;let r=null!==(o=null!==(n=null!==(t=e.imageUrl)&&void 0!==t?t:e.image_url)&&void 0!==n?n:e.image)&&void 0!==o?o:void 0;return"string"==typeof r&&r.trim().length>0?r:function(e){var t,n;let o=String(null!==(t=e.category)&&void 0!==t?t:"").toLowerCase(),r=[...Array.isArray(e.tags)?e.tags:[],...Array.isArray(e.mood)?e.mood:[],String(null!==(n=e.name)&&void 0!==n?n:"")].join(" ").replace(/\s+/g," ").toLowerCase(),i=/한식|국밥|백반|분식|김밥|찌개|삼겹|갈비|해장국|냉면/.test(r),l=/일식|초밥|스시|라멘|돈카츠|우동|이자카야/.test(r),a=/중식|짜장|짬뽕|탕수육|마라|양꼬치/.test(r),s=/양식|파스타|스테이크|피자|브런치|샐러드|버거/.test(r);return"restaurant"===o?i?"/images/placeholders/korean.jpg":l?"/images/placeholders/japanese.jpg":a?"/images/placeholders/chinese.jpg":s?"/images/placeholders/western.jpg":"/images/placeholders/default.jpg":"cafe"===o?"/images/placeholders/cafe.jpg":"salon"===o?"/images/placeholders/salon.jpg":"activity"===o?"/images/placeholders/activity.jpg":"/images/placeholders/default.jpg"}(e)},z=e=>null==e?"":Array.isArray(e)?e.filter(Boolean).join(" \xb7 "):"string"==typeof e?e:String(e),W=()=>{b&&(x(!1),Math.abs(h)>=60&&(h<0?P():L()),y(0))},B=(e,t)=>{var n,r,i,l,a;let u=R(e),d="0 14px 30px rgba(15,23,42,0.18)",c="prev"===t?-56:56,g=I(h/10,-8,8),f="prev"===t?c+g:"next"===t?c+g:0,m=z(null!==(n=null==e?void 0:e.categoryLabel)&&void 0!==n?n:null==e?void 0:e.category),y="number"==typeof(null==e?void 0:e.distanceKm)?e.distanceKm:null,x=z(null!==(i=null!==(r=null==e?void 0:e.reasonText)&&void 0!==r?r:null==e?void 0:e.moodText)&&void 0!==i?i:null==e?void 0:e.mood);return(0,o.jsxs)("button",{type:"button",onClick:()=>{if(!S.current){if("prev"===t)return L();if("next"===t)return P();s(e)}},style:{position:"absolute",inset:0,width:"100%",height:"100%",borderRadius:28,border:"none",padding:0,cursor:"pointer",background:"#ffffff",overflow:"hidden",transition:b?"none":"transform 220ms ease, opacity 220ms ease, box-shadow 220ms ease",userSelect:"none",WebkitTapHighlightColor:"transparent",..."curr"===t?{zIndex:30,opacity:1,transform:"translateX(".concat("curr"===t?h:0,"px) scale(1)"),boxShadow:"0 22px 45px rgba(15,23,42,0.26)"}:"prev"===t?{zIndex:20,opacity:.55,transform:"translateX(".concat(f,"px) scale(0.92)"),boxShadow:d}:{zIndex:10,opacity:.55,transform:"translateX(".concat(f,"px) scale(0.92)"),boxShadow:d}},children:[(0,o.jsx)("div",{style:{position:"relative",width:"100%",height:"70%",background:"#dbeafe"},children:u&&(0,o.jsx)("img",{src:u,alt:null!==(l=null==e?void 0:e.name)&&void 0!==l?l:"place",style:{width:"100%",height:"100%",objectFit:"cover"},loading:"curr"===t?"eager":"lazy",onError:t=>{let n=v(e),o=t.currentTarget;o.src!==window.location.origin+n&&(o.src=n)}})}),(0,o.jsxs)("div",{style:{padding:16,textAlign:"left"},children:[(0,o.jsx)("div",{style:{fontSize:18,fontWeight:900,color:"#111827",marginBottom:6},children:null==e?void 0:e.name}),(0,o.jsxs)("div",{style:{fontSize:12,color:"#6B7280",marginBottom:10},children:[m,null!=y&&(0,o.jsxs)(o.Fragment,{children:[" \xb7 ",y.toFixed(1)," km"]})]}),(0,o.jsx)("div",{style:{fontSize:13,color:"#111827",fontWeight:800},children:x})]})]},String(null!==(a=null==e?void 0:e.id)&&void 0!==a?a:"".concat(t,"-").concat(p)))};return(0,o.jsxs)("section",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)("div",{style:{width:"100%",maxWidth:430,padding:"0 2px",marginBottom:10,color:"#475569",fontSize:12,fontWeight:700,textAlign:"center"},children:E}),(0,o.jsx)("div",{style:{width:"100%",overflow:"visible"},children:(0,o.jsxs)("div",{onPointerDown:e=>{!l&&(f<=1||(x(!0),S.current=!1,w.current=e.clientX))},onPointerMove:e=>{if(!b)return;let t=e.clientX-w.current;Math.abs(t)>6&&(S.current=!0),y(I(t,-140,140))},onPointerUp:()=>W(),onPointerCancel:()=>{x(!1),y(0),S.current=!1},style:{width:"100%",maxWidth:320,aspectRatio:"1 / 1",position:"relative",overflow:"visible",margin:"0 auto",touchAction:"none"},children:[l&&(0,o.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:28,background:"#ffffff",boxShadow:"0 18px 45px rgba(15,23,42,0.18)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280",fontWeight:800},children:"불러오는 중..."}),!l&&0===f&&(0,o.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:28,background:"#ffffff",boxShadow:"0 18px 45px rgba(15,23,42,0.18)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280",fontWeight:800},children:"하마가 학습 중이에요"}),!l&&_&&B(_,"prev"),!l&&C&&B(C,"curr"),!l&&A&&B(A,"next")]})}),!l&&f>0&&(0,o.jsx)("div",{style:{marginTop:18,marginBottom:28,display:"flex",justifyContent:"center",gap:6},children:g.map((e,t)=>(0,o.jsx)("button",{type:"button",onClick:()=>m(t),style:{width:t===p?16:8,height:8,borderRadius:999,border:"none",padding:0,background:t===p?"#2563EB":"rgba(148,163,184,0.6)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":"카드 ".concat(t+1)},t))})]})}var b=n(191);function x(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(null!=e?e:"").trim();return n&&(n.startsWith("/")||t&&(n.startsWith("http://")||n.startsWith("https://")))?n:null}function w(e){var t,n,o,r,i,l,a,s,u,d,c,g,f,p,m,h,y,b;let w=null!==(t=x(e.cover_image_url,!0))&&void 0!==t?t:x(e.image_url,!1);return function(e){let t=v(e);return e.imageUrl||(e.imageUrl=t),e.image_url||(e.image_url=t),e}({id:e.id,name:null!==(n=e.name)&&void 0!==n?n:"",category:null!==(o=e.category)&&void 0!==o?o:null,categoryLabel:function(e){let t=(null!=e?e:"").toLowerCase();return"restaurant"===t?"식당":"cafe"===t?"카페":"salon"===t?"미용":"activity"===t?"액티비티":"장소"}(e.category),area:null!==(r=e.area)&&void 0!==r?r:null,address:null!==(i=e.address)&&void 0!==i?i:null,lat:null!==(l=e.lat)&&void 0!==l?l:null,lng:null!==(a=e.lng)&&void 0!==a?a:null,phone:null!==(s=e.phone)&&void 0!==s?s:null,image_url:w,imageUrl:w,kakao_place_url:null!==(u=e.kakao_place_url)&&void 0!==u?u:null,naver_place_id:null!==(d=e.naver_place_id)&&void 0!==d?d:null,mood:null!==(c=e.mood)&&void 0!==c?c:[],moodText:Array.isArray(b=e.mood)&&0!==b.length?b.slice(0,2).join(" \xb7 "):"",tags:null!==(g=e.tags)&&void 0!==g?g:[],with_kids:null!==(f=e.with_kids)&&void 0!==f?f:null,for_work:null!==(p=e.for_work)&&void 0!==p?p:null,reservation_required:null!==(m=e.reservation_required)&&void 0!==m?m:null,price_level:null!==(h=e.price_level)&&void 0!==h?h:null,curated_score:0,updated_at:null!==(y=e.updated_at)&&void 0!==y?y:null})}async function S(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(t=n.count)&&void 0!==t?t:"all"===e?12:6,r="all"===e?null:e,i=b.O.from("stores").select("\n      id,\n      name,\n      category,\n      area,\n      address,\n      lat,\n      lng,\n      phone,\n      image_url,\n      cover_image_url,\n      kakao_place_url,\n      naver_place_id,\n      mood,\n      tags,\n      with_kids,\n      for_work,\n      reservation_required,\n      price_level,\n      updated_at\n    ").limit(o);r&&(i=i.eq("category",r)),i=i.order("updated_at",{ascending:!1,nullsFirst:!1});let{data:l,error:a}=await i;return a?(console.error("[fetchHomeCardsByTab]",a),[]):(null!=l?l:[]).map(w)}function k(e){let t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function j(e){var t;let n=[];return(null==e?void 0:e.name)&&n.push(String(e.name)),(null==e?void 0:e.category)&&n.push(String(e.category)),Array.isArray(null==e?void 0:e.tags)&&n.push(e.tags.join(" ")),Array.isArray(null==e?void 0:e.mood)&&n.push(e.mood.join(" ")),(null==e?void 0:e.moodText)&&n.push(String(e.moodText)),String(null!=(t=n.join(" "))?t:"").toLowerCase().replace(/\s+/g," ").trim()}let _={date:{pos:[/데이트|커플|로맨틱|분위기|조용|야경|와인|파스타|스테이크|브런치|디저트|카페/],neg:[/단체|회식|뒤풀이|2차|3차/]},solo:{pos:[/혼밥|혼자|간단|빠르|가성비|점심|분식|국밥|백반|김밥|혼술/],neg:[/단체|회식|키즈|아이/]},family:{pos:[/가족|아이|키즈|유아|어린이|부모님|넓|주차|한식|백반|공원|박물관/],neg:[/2차|3차|이자카야|혼술/]},meeting:{pos:[/회식|모임|단체|룸|술|한잔|이자카야|고기|삼겹|갈비|맥주|소주|포차/],neg:[/혼밥|조용|키즈|유아/]}};async function C(e,t){return(function(e,t,n){var o;let r=e.map(e=>{let n=1*("number"==typeof(null==e?void 0:e.curated_score)?e.curated_score:0)+function(e,t){var n;if(!t||"none"===t)return 0;let o=j(e),r=_[t];if(!r)return 0;let i=0;for(let e of r.pos)e.test(o)&&(i+=6);for(let e of null!==(n=r.neg)&&void 0!==n?n:[])e.test(o)&&(i-=5);return i}(e,t)+5*Math.random();return{card:e,score:n}}).sort((e,t)=>t.score-e.score).map(e=>e.card);return Array.isArray(o=r.slice(0,Math.min(20,r.length)))&&0!==o.length?k(o).slice(0,Math.min(5,o.length)):[]})(await S(e,{count:40}),t,0).map(e=>{let n=function(e,t){var n,o;let r=String(null!==(n=null==e?void 0:e.category)&&void 0!==n?n:"").toLowerCase(),i=j(e);if(!t||"none"===t)return String(null!==(o=null==e?void 0:e.moodText)&&void 0!==o?o:"").trim()||"지금 보기 좋은 곳 위주로 골랐어";let l=e=>e.test(i);return"solo"===t?l(/혼밥|혼자/)?"혼밥하기 편한 곳 위주로 골랐어":l(/간단|빠르|가성비|점심/)?"빠르게 먹기 좋은 곳 위주로 골랐어":"cafe"===r?"혼자 있어도 부담 없는 카페 위주로 골랐어":"혼자 가기 좋은 조건 위주로 골랐어":"date"===t?l(/분위기|로맨틱|조용|야경/)?"데이트 분위기 좋은 곳 위주로 골랐어":l(/브런치|디저트/)?"데이트에 어울리는 디저트/브런치 위주로 골랐어":"cafe"===r?"데이트하기 좋은 카페 위주로 골랐어":"둘이 가기 좋은 분위기 위주로 골랐어":"family"===t?l(/아이|키즈|유아|어린이/)?"가족/아이랑 가기 좋은 곳 위주로 골랐어":l(/주차|넓/)?"가족 이동 편한(주차/공간) 곳 위주로 골랐어":"가족이 편하게 즐길 수 있는 곳 위주로 골랐어":"meeting"===t?l(/단체|모임|회식/)?"모임/회식하기 좋은 곳 위주로 골랐어":l(/룸/)?"단체로 앉기 편한(룸/좌석) 곳 위주로 골랐어":l(/술|한잔|이자카야|포차/)?"한잔하기 좋은 분위기 위주로 골랐어":"같이 가기 좋은(모임) 조건 위주로 골랐어":"지금 상황에 맞는 곳 위주로 골랐어"}(e,t);return{...e,reasonText:n}})}async function A(e){let[t,n,o,r]=await Promise.all([C("restaurant",e),C("cafe",e),C("salon",e),C("activity",e)]);return k([...t,...n,...o,...r])}function E(e){let t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function I(e){var t;let n=[];return(null==e?void 0:e.name)&&n.push(String(e.name)),(null==e?void 0:e.category)&&n.push(String(e.category)),Array.isArray(null==e?void 0:e.tags)&&n.push(e.tags.join(" ")),Array.isArray(null==e?void 0:e.mood)&&n.push(e.mood.join(" ")),(null==e?void 0:e.moodText)&&n.push(String(e.moodText)),String(null!=(t=n.join(" "))?t:"").toLowerCase().replace(/\s+/g," ").trim()}async function L(e){var t,n;let o=new URL("/api/places/nearby",window.location.origin);o.searchParams.set("lat",String(e.lat)),o.searchParams.set("lng",String(e.lng)),o.searchParams.set("tab",e.tab),o.searchParams.set("radiusKm",String(null!==(t=e.radiusKm)&&void 0!==t?t:4)),o.searchParams.set("limit",String(null!==(n=e.limit)&&void 0!==n?n:40));let r=await fetch(o.toString(),{cache:"no-store"});if(!r.ok)return[];let i=await r.json();return(null==i?void 0:i.ok)&&Array.isArray(i.cards)?i.cards:[]}async function P(e,t,n){return function(e,t,n){var o;let r=e.map(e=>{let n=function(e){let t="number"==typeof(null==e?void 0:e.curated_score)?e.curated_score:0,n="number"==typeof(null==e?void 0:e.distanceKm)?e.distanceKm:null;return .8*t+("number"==typeof n?Math.max(0,6-n):0)}(e)+function(e,t){if(!t||"none"===t)return 0;let n=I(e),o=0;return"solo"===t?(/혼밥|혼자|간단|빠르|가성비|점심/.test(n)&&(o+=8),/단체|회식|키즈|아이/.test(n)&&(o-=6)):"date"===t?(/데이트|커플|분위기|로맨틱|조용|야경|디저트|브런치/.test(n)&&(o+=8),/단체|회식|2차|3차/.test(n)&&(o-=6)):"family"===t?(/가족|아이|키즈|유아|주차|넓/.test(n)&&(o+=8),/2차|3차|혼술/.test(n)&&(o-=6)):"meeting"===t&&(/회식|모임|단체|룸|술|한잔|이자카야|고기/.test(n)&&(o+=8),/혼밥|조용|키즈|유아/.test(n)&&(o-=6)),o}(e,t)+5*Math.random();return{card:e,score:n}}).sort((e,t)=>t.score-e.score).map(e=>e.card);return(Array.isArray(o=r.slice(0,Math.min(20,r.length)))&&0!==o.length?E(o).slice(0,Math.min(5,o.length)):[]).map(e=>({...e,reasonText:function(e,t){var n,o;let r=String(null!==(n=null==e?void 0:e.category)&&void 0!==n?n:"").toLowerCase(),i=I(e),l=e=>e.test(i);return t&&"none"!==t?"solo"===t?l(/혼밥|혼자/)?"혼밥하기 편한 곳 위주로 골랐어":l(/간단|빠르|가성비|점심/)?"빠르게 먹기 좋은 곳 위주로 골랐어":"cafe"===r?"혼자 있어도 부담 없는 카페 위주로 골랐어":"혼자 가기 좋은 조건 위주로 골랐어":"date"===t?l(/분위기|로맨틱|조용|야경/)?"데이트 분위기 좋은 곳 위주로 골랐어":l(/브런치|디저트/)?"데이트에 어울리는 디저트/브런치 위주로 골랐어":"cafe"===r?"데이트하기 좋은 카페 위주로 골랐어":"둘이 가기 좋은 분위기 위주로 골랐어":"family"===t?l(/아이|키즈|유아|어린이/)?"가족/아이랑 가기 좋은 곳 위주로 골랐어":l(/주차|넓/)?"가족 이동 편한(주차/공간) 곳 위주로 골랐어":"가족이 편하게 즐길 수 있는 곳 위주로 골랐어":"meeting"===t?l(/단체|모임|회식/)?"모임/회식하기 좋은 곳 위주로 골랐어":l(/룸/)?"단체로 앉기 편한(룸/좌석) 곳 위주로 골랐어":l(/술|한잔|이자카야|포차/)?"한잔하기 좋은 분위기 위주로 골랐어":"같이 가기 좋은(모임) 조건 위주로 골랐어":"지금 상황에 맞는 곳 위주로 골랐어":String(null!==(o=null==e?void 0:e.moodText)&&void 0!==o?o:"").trim()||"지금 위치에서 가까운 곳 위주로 골랐어"}(e,t)}))}(await L({lat:e.lat,lng:e.lng,tab:t,limit:40}),n,0)}async function R(e,t){let[n,o,r,i]=await Promise.all([P(e,"restaurant",t),P(e,"cafe",t),P(e,"salon",t),P(e,"activity",t)]);return E([...n,...o,...r,...i])}var z=n(3123),W=n(5142);let B={date:["데이트","커플","여자친구","남자친구","기념일","소개팅","분위기","로맨틱","둘이","조용한"],solo:["혼밥","혼자","간단히","빨리","빠르게","가볍게","점심","저녁","혼술"],family:["가족","아이","애기","부모님","어린이","유아","키즈","할머니","할아버지"],meeting:["회식","모임","단체","술","한잔","뒤풀이","2차","3차","친구들이랑"]},M="hamaUser",O="hamaPointLogs",T="hamaLoggedIn";function U(e){return e.toLowerCase().replace(/\s+/g," ").trim()}function N(){var e,t,n,c;let p=(0,i.useRouter)(),m=(0,i.useSearchParams)(),[h,v]=(0,r.useState)(""),[b,x]=(0,r.useState)({nickname:"게스트",points:0}),[w,S]=(0,r.useState)(!1),[k,j]=(0,r.useState)("all"),[_,E]=(0,r.useState)(0),[I,L]=(0,r.useState)(null),{mode:N,loc:F,isLocLoading:K}=function(){let[e,t]=(0,r.useState)("recommend"),[n,o]=(0,r.useState)(null),[i,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=!0;return async function(){if(l(!0),!("geolocation"in navigator)){e&&(o(null),t("recommend"),l(!1));return}navigator.geolocation.getCurrentPosition(async n=>{let r=n.coords.latitude,i=n.coords.longitude;if(e){o({lat:r,lng:i});try{let e=await fetch("/api/local/reverse?lat=".concat(r,"&lng=").concat(i),{cache:"no-store"}),n=await e.json(),o=JSON.stringify(null!=n?n:{}).toLowerCase(),l=o.includes("오산"),a=o.includes("동탄");t(l||a?"recommend":"explore")}catch(e){t("recommend")}finally{l(!1)}}},()=>{e&&(o(null),t("recommend"),l(!1))},{enableHighAccuracy:!0,timeout:5e3})}(),()=>{e=!1}},[]),{mode:e,loc:n,isLocLoading:i}}(),D=null!=I?I:N,[q,H]=(0,r.useState)("none"),{cards:X,isLoading:J}=function(e,t,n){let[o,i]=(0,r.useState)([]),[l,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=!1;return(async()=>{a(!0);try{let o="all"===e?await A(n):await C(e,n);t||i(o)}catch(e){console.error("[useHomeCards]",e),t||i([])}finally{t||a(!1)}})(),()=>{t=!0}},[e,t,n]),{cards:o,isLoading:l}}(k,_,q),{cards:G,isLoading:Z}=function(e,t,n,o){let[i,l]=(0,r.useState)([]),[a,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let n=!1;return(async()=>{if(!(null==t?void 0:t.lat)||!(null==t?void 0:t.lng)){l([]),s(!1);return}s(!0);try{let r="all"===e?await R({lat:t.lat,lng:t.lng},o):await P({lat:t.lat,lng:t.lng},e,o);n||l(r)}catch(e){console.error("[useNearbyCards]",e),n||l([])}finally{n||s(!1)}})(),()=>{n=!0}},[e,null==t?void 0:t.lat,null==t?void 0:t.lng,n,o]),{cards:i,isLoading:a}}(k,F,_,q),[Q,Y]=(0,r.useState)(null),{recentCards:V,recordView:$}=(0,z.X)(),{toggleSaved:ee,isSaved:et}=(0,W.F)(),{setOverlayOpen:en}=(0,u.A)(),eo=m.get("open");(0,r.useEffect)(()=>{en(!!Q)},[Q,en]),(0,r.useEffect)(()=>{E(Date.now())},[]),(0,r.useEffect)(()=>{if(!eo)return;let e=V.find(e=>e.id===eo);e&&(Y(e),p.replace("/",{scroll:!1}))},[eo,V,p]),(0,r.useEffect)(()=>{let e=()=>{x(function(){try{var e;let t=window.localStorage.getItem(M);if(!t)return{nickname:"게스트",points:0};let n=JSON.parse(t);return{nickname:null!==(e=n.nickname)&&void 0!==e?e:"게스트",points:"number"==typeof n.points?n.points:0}}catch(e){return{nickname:"게스트",points:0}}}()),S("1"===window.localStorage.getItem(T))};return(0,a.K)("session_start",{page:"home"}),(0,a.K)("page_view",{page:"home"}),e(),window.addEventListener("focus",e),window.addEventListener("storage",e),window.addEventListener("pageshow",e),()=>{window.removeEventListener("focus",e),window.removeEventListener("storage",e),window.removeEventListener("pageshow",e)}},[]);let er=(e,t)=>{x(n=>{let o={...n,points:n.points+e};return!function(e){try{window.localStorage.setItem(M,JSON.stringify(e))}catch(e){}}(o),!function(e,t){try{let n=window.localStorage.getItem(O),o=n?JSON.parse(n):[],r=new Date,i=[{id:"".concat(r.getTime(),"-").concat(Math.random().toString(16).slice(2,8)),amount:e,reason:t,createdAt:r.toISOString()},...o].slice(0,100);window.localStorage.setItem(O,JSON.stringify(i))}catch(e){}}(e,t),o})},ei="explore"===D&&G.length>0?G:X,el="explore"===D?(K||Z)&&0===X.length:J,ea=(0,r.useMemo)(()=>"all"===k?ei:ei.slice(0,5),[ei,k]),es=e=>({lat:"number"==typeof e.lat?e.lat:"number"==typeof e.latitude?e.latitude:void 0,lng:"number"==typeof e.lng?e.lng:"number"==typeof e.longitude?e.longitude:void 0}),eu=e=>{var t,n,o,r;if(e)return null!==(r=null!==(o=null!==(n=null!==(t=e.imageUrl)&&void 0!==t?t:e.image)&&void 0!==n?n:e.image_url)&&void 0!==o?o:e.imageURL)&&void 0!==r?r:void 0},ed=(e,t)=>{var n,o,r;let i=String(null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"").trim();if(!i)return;if((0,a.K)("place_detail_action",{id:e.id,name:i,action:t,mode:D,tab:k,intention:q}),"길안내"===t){let{lat:t,lng:n}=es(e);!function(e){var t;let n=(null!==(t=e.name)&&void 0!==t?t:"").trim(),o="number"==typeof e.lat?e.lat:null,r="number"==typeof e.lng?e.lng:null,i=navigator.userAgent||"";if(/Android|iPhone|iPad|iPod/i.test(i)&&null!=o&&null!=r){let e="kakaomap://route?ep=".concat(o,",").concat(r,"&by=CAR"),t="https://map.kakao.com/link/to/".concat(encodeURIComponent(n),",").concat(o,",").concat(r);window.location.href=e,setTimeout(()=>{try{window.location.href=t}catch(e){}},700);return}null!=o&&null!=r?window.open("https://map.kakao.com/link/to/".concat(encodeURIComponent(n),",").concat(o,",").concat(r),"_blank","noopener,noreferrer"):window.open("https://map.kakao.com/?q=".concat(encodeURIComponent(n)),"_blank","noopener,noreferrer")}({name:i,lat:null!=t?t:null,lng:null!=n?n:null});return}let{lat:l,lng:s}=es(e),u=String(null!==(o=null==e?void 0:e.id)&&void 0!==o?o:"").trim(),d=null!==(r=null==e?void 0:e.naver_place_id)&&void 0!==r?r:null,c=new URLSearchParams({name:i||"",...u&&{storeId:u},...null!=l&&!Number.isNaN(l)&&{lat:String(l)},...null!=s&&!Number.isNaN(s)&&{lng:String(s)},...d&&{naverPlaceId:String(d)}});p.push("/reserve?".concat(c.toString()))};return(0,o.jsx)("main",{style:{minHeight:"100vh",paddingBottom:110,background:"linear-gradient(180deg, #F8FAFC 0%, #EEF2FF 100%)"},children:(0,o.jsxs)("div",{style:{maxWidth:430,margin:"0 auto",padding:"20px 18px 0"},children:[(0,o.jsx)(g,{isLoggedIn:w,nickname:b.nickname,points:b.points,onLoginClick:()=>{if(w){(0,a.K)("logout",{page:"home"}),window.localStorage.removeItem(M),window.localStorage.removeItem(O),window.localStorage.removeItem(T),x({nickname:"게스트",points:0}),S(!1),window.location.href="/api/auth/kakao/logout";return}(0,a.K)("login_start",{page:"home"}),window.location.href="/api/auth/kakao/login"},onGoPoints:()=>p.push("/mypage/points"),onGoMy:()=>p.push("/my"),onGoBeta:()=>p.push("/beta-info")}),(0,o.jsx)(f,{query:h,onChange:v,onSubmit:e=>{e.preventDefault();let t=h.trim();if(!t)return;let n=function(e){var t;let n=e.toLowerCase().replace(/\s+/g," ").trim();if(!n)return"none";let o={date:0,solo:0,family:0,meeting:0};Object.keys(B).forEach(e=>{for(let t of B[e])n.includes(t)&&(o[e]+=1)});let r=Math.max(...Object.values(o));if(0===r)return"none";let i=Object.entries(o).filter(e=>{let[,t]=e;return t===r}).map(e=>{let[t]=e;return t});for(let e of["date","solo","family","meeting"])if(i.includes(e))return e;return null!==(t=i[0])&&void 0!==t?t:"none"}(t);if(H(n),function(e){let t=U(e);return/(근처|주변|가까운|가까이|내\s?주변|여기\s?근처|근방)/.test(t)}(t)){let e=function(e){let t=U(e);return/(카페|커피|디저트|베이커리|브런치|라떼)/.test(t)?"cafe":/(식당|맛집|밥|점심|저녁|아침|혼밥|국밥|한식|일식|중식|양식|파스타|피자|초밥|라멘|고기|삼겹|갈비|회|분식|중국집|중국|한정식|점심식사|회식)/.test(t)?"restaurant":/(미용실|헤어|커트|펌|염색|네일|왁싱|피부|뷰티|샵)/.test(t)?"salon":/(액티비티|데이트|갈만한|놀거리|체험|전시|공원|박물관|운동|볼링|방탈출|카페거리)/.test(t)?"activity":"all"}(t);L("explore"),j(e),E(Date.now()),er(5,"근처 추천 요청"),(0,a.K)("nearby_intent",{query:t,tab:e,intention:n}),v("");return}er(5,"검색"),(0,a.K)("search",{query:t,page:"home",intention:n}),p.push("/search?query=".concat(encodeURIComponent(t)))}}),V.length>0&&(0,o.jsxs)("div",{style:{marginBottom:18},children:[(0,o.jsx)("div",{style:{fontSize:13,fontWeight:700,color:"#64748b",marginBottom:8},children:"최근 본 카드"}),(0,o.jsx)("div",{style:{display:"flex",gap:10,overflowX:"auto",paddingBottom:4,scrollbarWidth:"none"},children:V.slice(0,10).map(e=>{var t,n;return(0,o.jsx)("button",{type:"button",onClick:()=>{Y(e),$(e.id)},style:{flexShrink:0,width:100,height:100,borderRadius:12,overflow:"hidden",border:"none",padding:0,cursor:"pointer",background:"#111827"},children:(0,o.jsx)(l.default,{src:null!==(t=eu(e))&&void 0!==t?t:"/images/category/restaurant.jpg",alt:null!==(n=e.name)&&void 0!==n?n:"",width:100,height:100,style:{objectFit:"cover",width:"100%",height:"100%"}})},e.id)})})]}),(0,o.jsx)("div",{style:{display:"flex",gap:10,rowGap:10,flexWrap:"wrap",justifyContent:"center",marginBottom:18},children:[{key:"all",label:"종합"},{key:"restaurant",label:"식당"},{key:"cafe",label:"카페"},{key:"salon",label:"미용실"},{key:"activity",label:"액티비티"}].map(e=>{let t=e.key===k;return(0,o.jsx)("button",{type:"button",onClick:()=>{j(e.key),E(Date.now()),er(1,"홈 탭 변경"),(0,a.K)("home_tab_click",{tab:e.key,mode:D,intention:q})},style:{border:"none",cursor:"pointer",height:34,padding:"0 14px",borderRadius:999,background:t?"#dbeafe":"#ffffff",color:t?"#1d4ed8":"#111827",fontWeight:t?900:700,boxShadow:t?"0 8px 22px rgba(37,99,235,0.18)":"0 6px 16px rgba(15,23,42,0.08)"},children:e.label},e.key)})}),(0,o.jsx)(y,{cards:ea,homeTab:k,mode:D,isLoading:el,onOpenCard:e=>{Y(e),$(e.id),er(2,"홈 추천 카드 열람"),(0,a.K)("home_card_open",{id:e.id,name:e.name,tab:k,mode:D,intention:q})},onAddPoints:er},"".concat(D,"-").concat(k,"-").concat(_)),Q&&(0,o.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:2e3,background:"rgba(15,23,42,0.9)",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,o.jsx)("div",{onClick:()=>Y(null),style:{position:"absolute",inset:0}}),(0,o.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:430,height:"100%",maxHeight:820,padding:"16px 12px 96px",boxSizing:"border-box"},children:[(0,o.jsx)("div",{style:{position:"relative",width:"100%",height:"100%",borderRadius:32,overflow:"hidden",background:"#111827",boxShadow:"0 24px 60px rgba(0,0,0,0.6)"},children:(0,o.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(()=>{var e;let t=eu(Q);return t?(0,o.jsx)(l.default,{src:t,alt:null!==(e=Q.name)&&void 0!==e?e:"place",fill:!0,style:{objectFit:"cover"}}):null})(),(0,o.jsx)("button",{type:"button",onClick:()=>Y(null),style:{position:"absolute",top:16,left:16,width:36,height:36,borderRadius:999,border:"none",background:"rgba(15,23,42,0.65)",color:"#f9fafb",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:"←"}),(0,o.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),ee(Q.id)},style:{position:"absolute",top:16,right:16,width:36,height:36,borderRadius:999,border:"none",background:"rgba(15,23,42,0.65)",color:et(Q.id)?"#f43f5e":"#f9fafb",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:18},children:et(Q.id)?"♥":"♡"}),(0,o.jsxs)("div",{style:{position:"absolute",left:0,right:0,bottom:0,padding:"20px 20px 20px",background:"linear-gradient(180deg, rgba(15,23,42,0) 0%, rgba(15,23,42,0.85) 100%)"},children:[(0,o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",padding:"6px 12px",borderRadius:999,background:"rgba(15,23,42,0.75)",color:"#f9fafb",fontSize:11,marginBottom:10},children:[Q.name," \xb7"," ",null!==(t=Q.categoryLabel)&&void 0!==t?t:Q.category]}),(0,o.jsx)("div",{style:{fontSize:14,color:"#e5e7eb"},children:null!==(c=null!==(n=null===(e=Q.mood)||void 0===e?void 0:e[0])&&void 0!==n?n:Q.moodText)&&void 0!==c?c:""})]})]})}),(0,o.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:16,display:"flex",justifyContent:"space-between",gap:10,padding:"0 20px",boxSizing:"border-box"},children:["길안내","예약\xb7자세히"].map(e=>(0,o.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),ed(Q,e)},style:{flex:1,height:40,borderRadius:999,border:"none",background:"#f9fafb",color:"#111827",fontSize:13,fontWeight:800,cursor:"pointer"},children:e},e))})]})]}),!Q&&(0,o.jsx)(s,{}),(0,o.jsx)(d,{})]})})}function F(){return(0,o.jsx)(r.Suspense,{fallback:(0,o.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#F8FAFC"},children:"로딩 중..."}),children:(0,o.jsx)(N,{})})}}},function(e){e.O(0,[146,399,316,293,528,744],function(){return e(e.s=5276)}),_N_E=e.O()}]);