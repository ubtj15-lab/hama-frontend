(()=>{var e={};e.id=1931,e.ids=[1931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},5365:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>g,tree:()=>d}),r(1254),r(9395),r(7824);var n=r(3282),i=r(5736),a=r(3906),o=r.n(a),s=r(6880),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1254)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9395)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\page.tsx"],c="/page",p={require:r,loadChunk:()=>Promise.resolve()},g=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3204:(e,t,r)=>{Promise.resolve().then(r.bind(r,1567)),Promise.resolve().then(r.bind(r,9938))},8093:(e,t,r)=>{Promise.resolve().then(r.bind(r,170))},9775:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},1567:(e,t,r)=>{"use strict";function n(){return null}r.d(t,{AuthSync:()=>n}),r(3677)},9990:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var n=r(3677),i=r(2500),a=r(6974);function o(){let[e,t]=(0,n.useState)([]),[r,o]=(0,n.useState)(!1),s=(0,a.n)(),l=(0,n.useCallback)(async()=>{if(!(!s||s.startsWith("server"))){o(!0);try{let e=await fetch(`/api/recent?user_id=${encodeURIComponent(s)}&limit=20`),r=(await e.json()).stores??[];t(r.map(e=>(0,i.O)(e)))}catch{t([])}finally{o(!1)}}},[s]);return{recentCards:e,loading:r,recordView:(0,n.useCallback)(async e=>{if(!(!s||s.startsWith("server")))try{await fetch("/api/recent/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s,store_id:e})}),await l()}catch{}},[s,l]),refetch:l}}},7814:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var n=r(3677),i=r(2500),a=r(6974);function o(){let[e,t]=(0,n.useState)(new Set),[r,o]=(0,n.useState)([]),[s,l]=(0,n.useState)(!1),d=(0,a.n)(),u=(0,n.useCallback)(async()=>{if(!(!d||d.startsWith("server"))){l(!0);try{let e=await fetch(`/api/saved?user_id=${encodeURIComponent(d)}`),r=await e.json();t(new Set(r.saved_ids??[])),o((r.stores??[]).map(e=>(0,i.O)(e)))}catch{t(new Set),o([])}finally{l(!1)}}},[d]),c=(0,n.useCallback)(async r=>{if(!d||d.startsWith("server"))return!1;let n=e.has(r);t(e=>{let t=new Set(e);return n?t.delete(r):t.add(r),t});try{let e=await fetch("/api/saved",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:d,store_id:r})}),i=await e.json();if(!i.ok)return t(e=>{let t=new Set(e);return n?t.add(r):t.delete(r),t}),n;return i.saved}catch{return t(e=>{let t=new Set(e);return n?t.add(r):t.delete(r),t}),n}},[d,e]),p=(0,n.useCallback)(t=>e.has(t),[e]);return{savedIds:e,savedCards:r,loading:s,toggleSaved:c,isSaved:p,refetch:u}}},4389:(e,t,r)=>{"use strict";function n(){return""}r.d(t,{Z:()=>n})},6974:(e,t,r)=>{"use strict";function n(){return"server"}r.d(t,{n:()=>n}),r(4389)},9938:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,UIOverlayProvider:()=>o});var n=r(3227),i=r(3677);let a=(0,i.createContext)(null);function o({children:e}){let[t,r]=(0,i.useState)(!1),o=(0,i.useMemo)(()=>({overlayOpen:t,setOverlayOpen:r}),[t]);return n.jsx(a.Provider,{value:o,children:e})}function s(){let e=(0,i.useContext)(a);if(!e)throw Error("useUIOverlay must be used within UIOverlayProvider");return e}},1959:(e,t,r)=>{"use strict";function n(e,t={}){}r.d(t,{K:()=>n}),r(6974),r(4389)},2500:(e,t,r)=>{"use strict";function n(e){let t=String(e??"").toLowerCase().trim();return"beauty"===t?"salon":"fd6"===t?"restaurant":"ce7"===t?"cafe":"bk9"===t?"salon":"at4"===t?"activity":t.includes("미용")||t.includes("헤어")||t.includes("이발")?"salon":t.includes("카페")||t.includes("커피")?"cafe":t.includes("식당")||t.includes("음식")||t.includes("레스토랑")||t.includes("맛집")?"restaurant":t.includes("액티비")||t.includes("활동")||t.includes("체험")||t.includes("공원")?"activity":"restaurant"===t||"cafe"===t||"salon"===t||"activity"===t?t:"restaurant"}function i(e){let t=String(e?.id??e?.store_id??e?.storeId??"").trim(),r=String(e?.name??e?.store_name??e?.storeName??"").trim(),i=n(e?.category??e?.categoryNorm??e?.category_norm??e?.tab??e?.type??e?.kind),a=String(e?.categoryLabel??e?.category_label??function(e){let t=n(e);return"restaurant"===t?"식당":"cafe"===t?"카페":"salon"===t?"미용실":"액티비티"}(i)),o=Number(e?.distanceKm??e?.distance_km??("number"==typeof e?.distance?e.distance/1e3:void 0)),s=Number.isFinite(o)?o:0,l=String(e?.cover_image_url??e?.imageUrl??e?.image_url??e?.image??e?.thumbnail??e?.thumb??""),d="number"==typeof e?.lat?e.lat:"number"==typeof e?.latitude?e.latitude:e?.lat??e?.latitude??null,u="number"==typeof e?.lng?e.lng:"number"==typeof e?.longitude?e.longitude:e?.lng??e?.longitude??null;return{id:t,name:r,category:i,categoryLabel:a,distanceKm:s,moodText:String(e?.moodText??e?.mood_text??e?.mood??""),imageUrl:l,quickQuery:String(e?.quickQuery??e?.quick_query??r),lat:d,lng:u,mood:e?.mood??null,withKids:e?.withKids??e?.with_kids??null,forWork:e?.forWork??e?.for_work??null,priceLevel:e?.priceLevel??e?.price_level??null,tags:e?.tags??null}}r.d(t,{O:()=>i})},7822:(e,t,r)=>{"use strict";var n=r(8830);let i=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",a=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder";(0,n.eI)(i,a)},170:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(3227),i=r(3677),a=r.n(i),o=r(1043),s=r(9101),l=r(1959);function d(){let e=(0,o.useRouter)(),t=(0,o.usePathname)();return"/map"===t||"/reserve"===t?null:n.jsx("button",{type:"button",onClick:()=>e.push("/feedback"),"aria-label":"feedback",style:{position:"fixed",right:18,bottom:22,zIndex:2500,width:56,height:56,borderRadius:999,border:"none",cursor:"pointer",background:"linear-gradient(135deg, #2563eb, #4f46e5)",boxShadow:"0 16px 32px rgba(37,99,235,0.35)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:900,fontSize:16},title:"피드백",children:"✎"})}var u=r(9938);function c(){let{overlayOpen:e}=(0,u.A)();return e?null:n.jsx("div",{style:{position:"fixed",left:"50%",bottom:24,transform:"translateX(-50%)",zIndex:9999,pointerEvents:"none",width:"auto",height:"auto"},children:n.jsx("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),console.log("mic click")},style:{pointerEvents:"auto",width:72,height:72,borderRadius:9999,border:"none",cursor:"pointer",background:"white",boxShadow:"0 10px 30px rgba(0,0,0,0.18)"},"aria-label":"voice input",children:"\uD83C\uDFA4"})})}var p=r(649);function g({isLoggedIn:e,nickname:t,points:r,onLoginClick:o,onGoPoints:s,onGoMy:l,onGoBeta:d}){let[u,c]=a().useState(!1),[g,f]=a().useState({top:60,left:10}),h=(0,i.useRef)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("header",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:18},children:[n.jsx("button",{ref:h,type:"button",onClick:()=>c(e=>!e),"aria-label":"메뉴 열기",style:{width:42,height:42,borderRadius:999,border:"none",background:"#ffffff",boxShadow:"0 6px 18px rgba(15,23,42,0.12)",cursor:"pointer",fontSize:18},children:"☰"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[n.jsx("div",{style:{fontWeight:900,letterSpacing:1.2,fontSize:22,color:"#2563EB"},children:"HAMA"}),n.jsx(p.default,{href:"/partner",style:{fontSize:13,fontWeight:700,color:"#1e40af",textDecoration:"none",padding:"6px 12px",borderRadius:999,background:"#dbeafe",border:"1px solid #93c5fd"},children:"매장주 대시보드"})]}),n.jsx("button",{type:"button",onClick:o,style:{height:42,borderRadius:999,border:"none",padding:"0 14px",background:e?"#111827":"#FEE500",color:e?"#ffffff":"#111827",fontWeight:800,cursor:"pointer",boxShadow:"0 6px 18px rgba(15,23,42,0.12)"},children:e?"로그아웃":"카카오 로그인"})]}),u&&n.jsx("div",{onClick:()=>c(!1),style:{position:"fixed",inset:0,zIndex:3e3,background:"transparent"},children:(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{position:"absolute",top:g.top,left:g.left,width:200,maxHeight:"min(70vh, 400px)",borderRadius:16,background:"#ffffff",boxShadow:"0 16px 40px rgba(15,23,42,0.18)",overflowY:"auto",overflowX:"hidden"},children:[(0,n.jsxs)("div",{style:{padding:"10px 12px",borderBottom:"1px solid #E5E7EB"},children:[n.jsx("div",{style:{fontSize:12,color:"#6B7280"},children:"닉네임"}),n.jsx("div",{style:{fontSize:14,fontWeight:800,color:"#111827"},children:t}),(0,n.jsxs)("div",{style:{marginTop:6,fontSize:12,color:"#2563EB",fontWeight:800},children:[r.toLocaleString(),"P"]})]}),n.jsx(p.default,{href:"/partner",onClick:()=>c(!1),style:{display:"block",width:"100%",padding:"12px 12px",textAlign:"left",background:"#EFF6FF",border:"none",borderBottom:"1px solid #E5E7EB",cursor:"pointer",fontSize:14,fontWeight:700,color:"#1d4ed8",textDecoration:"none"},children:"매장주 대시보드"}),n.jsx("button",{type:"button",onClick:()=>{c(!1),s()},style:{width:"100%",padding:"12px 12px",textAlign:"left",background:"transparent",border:"none",cursor:"pointer",fontSize:13,color:"#111827"},children:"포인트 내역"}),l&&n.jsx("button",{type:"button",onClick:()=>{c(!1),l()},style:{width:"100%",padding:"12px 12px",textAlign:"left",background:"transparent",border:"none",cursor:"pointer",fontSize:13,color:"#111827"},children:"저장\xb7최근본"}),n.jsx("button",{type:"button",onClick:()=>{c(!1),d()},style:{width:"100%",padding:"12px 12px",textAlign:"left",background:"transparent",border:"none",cursor:"pointer",fontSize:13,color:"#111827"},children:"베타 안내"})]})})]})}function f({query:e,onChange:t,onSubmit:r}){return(0,n.jsxs)("form",{onSubmit:r,style:{display:"flex",alignItems:"center",gap:10,borderRadius:999,padding:"10px 12px",boxShadow:"0 10px 30px rgba(15,23,42,0.10)",marginBottom:14,background:"#ffffff"},children:[n.jsx("span",{style:{fontSize:16},children:"\uD83D\uDD0E"}),n.jsx("input",{value:e,onChange:e=>t(e.target.value),placeholder:"근처 카페 찾아줘 / 점심 뭐 먹지",style:{flex:1,border:"none",outline:"none",fontSize:14.5,fontWeight:600,background:"transparent",padding:"0 2px"}}),n.jsx("button",{type:"submit",style:{height:36,padding:"0 16px",borderRadius:999,border:"none",cursor:"pointer",background:"linear-gradient(135deg, #38bdf8, #2563eb)",color:"#ffffff",fontWeight:800,boxShadow:"0 10px 18px rgba(37,99,235,0.22)"},children:"검색"})]})}let h={restaurant:"/images/category/restaurant.jpg",restaurant_korean:"/images/category/restaurant-korean.jpg",restaurant_chinese:"/images/category/restaurant-chinese.jpg",restaurant_japanese:"/images/category/restaurant-japanese.jpg",restaurant_western:"/images/category/restaurant-western.jpg",cafe:"/images/category/cafe.jpg",activity:"/images/category/activity.jpg",museum:"/images/category/museum.jpg",salon:"/images/category/salon.jpg",park:"/images/category/park.png"};function m(e){return(e??"").trim().toLowerCase()}function b(e,t){return t.some(t=>e.includes(t))}function x({cards:e,homeTab:t,mode:r,isLoading:a,onOpenCard:o,onAddPoints:s}){let[d,u]=(0,i.useState)([]),c=(0,i.useMemo)(()=>a?[]:d.length>0?d:Array.isArray(e)?e:[],[a,d,e]),p=c.length,[g,f]=(0,i.useState)(0),[x,y]=(0,i.useState)(0),[v,j]=(0,i.useState)(!1),S=(0,i.useRef)(0),w=(0,i.useRef)(!1),k=p>0&&g>0,_=p>0&&g<p-1,C=k?c[g-1]:null,P=p>0?c[g]:null,A=_?c[g+1]:null,I=(0,i.useMemo)(()=>"explore"===r?"지금 있는 곳 기준으로 가까운 장소를 보여드릴게요.":"하마가 자신 있는 지역 추천이에요.",[r]),z=(e,t,r)=>Math.max(t,Math.min(r,e)),R=()=>{k&&(f(e=>Math.max(0,e-1)),s?.(1,"카드 넘김"),(0,l.K)("home_card_swipe",{dir:"prev",tab:t,mode:r,index:g-1}))},U=()=>{_&&(f(e=>Math.min(p-1,e+1)),s?.(1,"카드 넘김"),(0,l.K)("home_card_swipe",{dir:"next",tab:t,mode:r,index:g+1}))},W=e=>{if(!e)return;let t=e.imageUrl??e.image_url??e.image??void 0;return"string"==typeof t&&t.trim().length>0?t:function(e){let t=String(e.category??"").toLowerCase(),r=[...Array.isArray(e.tags)?e.tags:[],...Array.isArray(e.mood)?e.mood:[],String(e.name??"")].join(" ").replace(/\s+/g," ").toLowerCase(),n=/한식|국밥|백반|분식|김밥|찌개|삼겹|갈비|해장국|냉면/.test(r),i=/일식|초밥|스시|라멘|돈카츠|우동|이자카야/.test(r),a=/중식|짜장|짬뽕|탕수육|마라|양꼬치/.test(r),o=/양식|파스타|스테이크|피자|브런치|샐러드|버거/.test(r);return"restaurant"===t?n?"/images/placeholders/korean.jpg":i?"/images/placeholders/japanese.jpg":a?"/images/placeholders/chinese.jpg":o?"/images/placeholders/western.jpg":"/images/placeholders/default.jpg":"cafe"===t?"/images/placeholders/cafe.jpg":"salon"===t?"/images/placeholders/salon.jpg":"activity"===t?"/images/placeholders/activity.jpg":"/images/placeholders/default.jpg"}(e)},B=e=>null==e?"":Array.isArray(e)?e.filter(Boolean).join(" \xb7 "):"string"==typeof e?e:String(e),E=()=>{v&&(j(!1),Math.abs(x)>=60&&(x<0?U():R()),y(0))},L=(e,t)=>{let r=W(e),i="0 14px 30px rgba(15,23,42,0.18)",a="prev"===t?-56:56,s=z(x/10,-8,8),l="prev"===t?a+s:"next"===t?a+s:0,d="curr"===t?{zIndex:30,opacity:1,transform:`translateX(${"curr"===t?x:0}px) scale(1)`,boxShadow:"0 22px 45px rgba(15,23,42,0.26)"}:"prev"===t?{zIndex:20,opacity:.55,transform:`translateX(${l}px) scale(0.92)`,boxShadow:i}:{zIndex:10,opacity:.55,transform:`translateX(${l}px) scale(0.92)`,boxShadow:i},u=B(e?.categoryLabel??e?.category),c="number"==typeof e?.distanceKm?e.distanceKm:null,p=B(e?.reasonText??e?.moodText??e?.mood);return(0,n.jsxs)("button",{type:"button",onClick:()=>{if(!w.current){if("prev"===t)return R();if("next"===t)return U();o(e)}},style:{position:"absolute",inset:0,width:"100%",height:"100%",borderRadius:28,border:"none",padding:0,cursor:"pointer",background:"#ffffff",overflow:"hidden",transition:v?"none":"transform 220ms ease, opacity 220ms ease, box-shadow 220ms ease",userSelect:"none",WebkitTapHighlightColor:"transparent",...d},children:[n.jsx("div",{style:{position:"relative",width:"100%",height:"70%",background:"#dbeafe"},children:r&&n.jsx("img",{src:r,alt:e?.name??"place",style:{width:"100%",height:"100%",objectFit:"cover"},loading:"curr"===t?"eager":"lazy",onError:t=>{let r=function(e){let t=e.imageUrl||e.image_url||e.image||e.imageURL;if(t&&"string"==typeof t&&t.trim().length>0)return t;let r=m(e.category);if("cafe"===r)return h.cafe;if("salon"===r)return h.salon;if("activity"===r){let t=`${m(e.name)} ${m(e.categoryLabel)} ${Array.isArray(e.tags)?m(e.tags.join(" ")):""} ${m(e.moodText)}`;return b(t,["박물관","전시","미술관","갤러리","museum"])?h.museum:b(t,["공원","산책","park"])?h.park:h.activity}return h[function(e){let t=m(e?.name),r=m(e?.categoryLabel),n=m(e?.moodText),i=Array.isArray(e?.mood)?e.mood.join(" "):"",a=Array.isArray(e?.tags)?e.tags.join(" "):"",o=`${t} ${r} ${n} ${m(i)} ${m(a)}`;return b(o,["한식","국밥","백반","김치","삼겹","갈비","찌개","비빔","냉면","분식","족발","보쌈"])?"restaurant_korean":b(o,["중식","짜장","짬뽕","탕수","마라","훠궈","딤섬","양꼬치"])?"restaurant_chinese":b(o,["일식","초밥","스시","라멘","돈까스","우동","사시미","이자카야","규카츠"])?"restaurant_japanese":b(o,["양식","파스타","스테이크","피자","브런치","그릴","바베큐","버거","샌드위치"])?"restaurant_western":"restaurant"}(e)]}(e),n=t.currentTarget;n.src!==window.location.origin+r&&(n.src=r)}})}),(0,n.jsxs)("div",{style:{padding:16,textAlign:"left"},children:[n.jsx("div",{style:{fontSize:18,fontWeight:900,color:"#111827",marginBottom:6},children:e?.name}),(0,n.jsxs)("div",{style:{fontSize:12,color:"#6B7280",marginBottom:10},children:[u,null!=c&&(0,n.jsxs)(n.Fragment,{children:[" \xb7 ",c.toFixed(1)," km"]})]}),n.jsx("div",{style:{fontSize:13,color:"#111827",fontWeight:800},children:p})]})]},String(e?.id??`${t}-${g}`))};return(0,n.jsxs)("section",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[n.jsx("div",{style:{width:"100%",maxWidth:430,padding:"0 2px",marginBottom:10,color:"#475569",fontSize:12,fontWeight:700,textAlign:"center"},children:I}),n.jsx("div",{style:{width:"100%",overflow:"visible"},children:(0,n.jsxs)("div",{onPointerDown:e=>{!a&&(p<=1||(j(!0),w.current=!1,S.current=e.clientX))},onPointerMove:e=>{if(!v)return;let t=e.clientX-S.current;Math.abs(t)>6&&(w.current=!0),y(z(t,-140,140))},onPointerUp:()=>E(),onPointerCancel:()=>{j(!1),y(0),w.current=!1},style:{width:"100%",maxWidth:320,aspectRatio:"1 / 1",position:"relative",overflow:"visible",margin:"0 auto",touchAction:"none"},children:[a&&n.jsx("div",{style:{width:"100%",height:"100%",borderRadius:28,background:"#ffffff",boxShadow:"0 18px 45px rgba(15,23,42,0.18)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280",fontWeight:800},children:"불러오는 중..."}),!a&&0===p&&n.jsx("div",{style:{width:"100%",height:"100%",borderRadius:28,background:"#ffffff",boxShadow:"0 18px 45px rgba(15,23,42,0.18)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6B7280",fontWeight:800},children:"하마가 학습 중이에요"}),!a&&C&&L(C,"prev"),!a&&P&&L(P,"curr"),!a&&A&&L(A,"next")]})}),!a&&p>0&&n.jsx("div",{style:{marginTop:18,marginBottom:28,display:"flex",justifyContent:"center",gap:6},children:c.map((e,t)=>n.jsx("button",{type:"button",onClick:()=>f(t),style:{width:t===g?16:8,height:8,borderRadius:999,border:"none",padding:0,background:t===g?"#2563EB":"rgba(148,163,184,0.6)",cursor:"pointer",transition:"all 0.2s ease"},"aria-label":`카드 ${t+1}`},t))})]})}r(7822);var y=r(9990),v=r(7814);let j={date:["데이트","커플","여자친구","남자친구","기념일","소개팅","분위기","로맨틱","둘이","조용한"],solo:["혼밥","혼자","간단히","빨리","빠르게","가볍게","점심","저녁","혼술"],family:["가족","아이","애기","부모님","어린이","유아","키즈","할머니","할아버지"],meeting:["회식","모임","단체","술","한잔","뒤풀이","2차","3차","친구들이랑"]};function S(e){return e.toLowerCase().replace(/\s+/g," ").trim()}function w(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)(),[r,a]=(0,i.useState)(""),[p,h]=(0,i.useState)({nickname:"게스트",points:0}),[m,b]=(0,i.useState)(!1),[w,k]=(0,i.useState)("all"),[_,C]=(0,i.useState)(0),[P,A]=(0,i.useState)(null),{mode:I,loc:z,isLocLoading:R}=function(){let[e,t]=(0,i.useState)("recommend"),[r,n]=(0,i.useState)(null),[a,o]=(0,i.useState)(!0);return{mode:e,loc:r,isLocLoading:a}}(),U=P??I,[W,B]=(0,i.useState)("none"),{cards:E,isLoading:L}=function(e,t,r){let[n,a]=(0,i.useState)([]),[o,s]=(0,i.useState)(!1);return{cards:n,isLoading:o}}(0,0,0),{cards:F,isLoading:$}=function(e,t,r,n){let[a,o]=(0,i.useState)([]),[s,l]=(0,i.useState)(!1);return{cards:a,isLoading:s}}(0,0,0,0),[O,M]=(0,i.useState)(null),{recentCards:T,recordView:q}=(0,y.X)(),{toggleSaved:K,isSaved:N}=(0,v.F)(),{setOverlayOpen:D}=(0,u.A)();t.get("open");let X=(e,t)=>{h(t=>({...t,points:t.points+e}))},G="explore"===U&&F.length>0?F:E,H="explore"===U?(R||$)&&0===E.length:L,J=(0,i.useMemo)(()=>"all"===w?G:G.slice(0,5),[G,w]),Q=e=>({lat:"number"==typeof e.lat?e.lat:"number"==typeof e.latitude?e.latitude:void 0,lng:"number"==typeof e.lng?e.lng:"number"==typeof e.longitude?e.longitude:void 0}),Y=e=>{if(e)return e.imageUrl??e.image??e.image_url??e.imageURL??void 0},V=(t,r)=>{let n=String(t?.name??"").trim();if(!n)return;if((0,l.K)("place_detail_action",{id:t.id,name:n,action:r,mode:U,tab:w,intention:W}),"길안내"===r){var i;let{lat:e,lng:r}=Q(t);((i={name:n,lat:e??null,lng:r??null}).name??"").trim(),"number"==typeof i.lat&&i.lat,"number"==typeof i.lng&&i.lng;return}let{lat:a,lng:o}=Q(t),s=String(t?.id??"").trim(),d=t?.naver_place_id??null,u=new URLSearchParams({name:n||"",...s&&{storeId:s},...null!=a&&!Number.isNaN(a)&&{lat:String(a)},...null!=o&&!Number.isNaN(o)&&{lng:String(o)},...d&&{naverPlaceId:String(d)}});e.push(`/reserve?${u.toString()}`)};return n.jsx("main",{style:{minHeight:"100vh",paddingBottom:110,background:"linear-gradient(180deg, #F8FAFC 0%, #EEF2FF 100%)"},children:(0,n.jsxs)("div",{style:{maxWidth:430,margin:"0 auto",padding:"20px 18px 0"},children:[n.jsx(g,{isLoggedIn:m,nickname:p.nickname,points:p.points,onLoginClick:()=>{if(m){(0,l.K)("logout",{page:"home"}),h({nickname:"게스트",points:0}),b(!1),window.location.href="/api/auth/kakao/logout";return}(0,l.K)("login_start",{page:"home"}),window.location.href="/api/auth/kakao/login"},onGoPoints:()=>e.push("/mypage/points"),onGoMy:()=>e.push("/my"),onGoBeta:()=>e.push("/beta-info")}),n.jsx(f,{query:r,onChange:a,onSubmit:t=>{t.preventDefault();let n=r.trim();if(!n)return;let i=function(e){let t=e.toLowerCase().replace(/\s+/g," ").trim();if(!t)return"none";let r={date:0,solo:0,family:0,meeting:0};Object.keys(j).forEach(e=>{for(let n of j[e])t.includes(n)&&(r[e]+=1)});let n=Math.max(...Object.values(r));if(0===n)return"none";let i=Object.entries(r).filter(([,e])=>e===n).map(([e])=>e);for(let e of["date","solo","family","meeting"])if(i.includes(e))return e;return i[0]??"none"}(n);if(B(i),function(e){let t=S(e);return/(근처|주변|가까운|가까이|내\s?주변|여기\s?근처|근방)/.test(t)}(n)){let e=function(e){let t=S(e);return/(카페|커피|디저트|베이커리|브런치|라떼)/.test(t)?"cafe":/(식당|맛집|밥|점심|저녁|아침|혼밥|국밥|한식|일식|중식|양식|파스타|피자|초밥|라멘|고기|삼겹|갈비|회|분식|중국집|중국|한정식|점심식사|회식)/.test(t)?"restaurant":/(미용실|헤어|커트|펌|염색|네일|왁싱|피부|뷰티|샵)/.test(t)?"salon":/(액티비티|데이트|갈만한|놀거리|체험|전시|공원|박물관|운동|볼링|방탈출|카페거리)/.test(t)?"activity":"all"}(n);A("explore"),k(e),C(Date.now()),X(5,"근처 추천 요청"),(0,l.K)("nearby_intent",{query:n,tab:e,intention:i}),a("");return}X(5,"검색"),(0,l.K)("search",{query:n,page:"home",intention:i}),e.push(`/search?query=${encodeURIComponent(n)}`)}}),T.length>0&&(0,n.jsxs)("div",{style:{marginBottom:18},children:[n.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#64748b",marginBottom:8},children:"최근 본 카드"}),n.jsx("div",{style:{display:"flex",gap:10,overflowX:"auto",paddingBottom:4,scrollbarWidth:"none"},children:T.slice(0,10).map(e=>n.jsx("button",{type:"button",onClick:()=>{M(e),q(e.id)},style:{flexShrink:0,width:100,height:100,borderRadius:12,overflow:"hidden",border:"none",padding:0,cursor:"pointer",background:"#111827"},children:n.jsx(s.default,{src:Y(e)??"/images/category/restaurant.jpg",alt:e.name??"",width:100,height:100,style:{objectFit:"cover",width:"100%",height:"100%"}})},e.id))})]}),n.jsx("div",{style:{display:"flex",gap:10,rowGap:10,flexWrap:"wrap",justifyContent:"center",marginBottom:18},children:[{key:"all",label:"종합"},{key:"restaurant",label:"식당"},{key:"cafe",label:"카페"},{key:"salon",label:"미용실"},{key:"activity",label:"액티비티"}].map(e=>{let t=e.key===w;return n.jsx("button",{type:"button",onClick:()=>{k(e.key),C(Date.now()),X(1,"홈 탭 변경"),(0,l.K)("home_tab_click",{tab:e.key,mode:U,intention:W})},style:{border:"none",cursor:"pointer",height:34,padding:"0 14px",borderRadius:999,background:t?"#dbeafe":"#ffffff",color:t?"#1d4ed8":"#111827",fontWeight:t?900:700,boxShadow:t?"0 8px 22px rgba(37,99,235,0.18)":"0 6px 16px rgba(15,23,42,0.08)"},children:e.label},e.key)})}),n.jsx(x,{cards:J,homeTab:w,mode:U,isLoading:H,onOpenCard:e=>{M(e),q(e.id),X(2,"홈 추천 카드 열람"),(0,l.K)("home_card_open",{id:e.id,name:e.name,tab:w,mode:U,intention:W})},onAddPoints:X},`${U}-${w}-${_}`),O&&(0,n.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:2e3,background:"rgba(15,23,42,0.9)",display:"flex",alignItems:"center",justifyContent:"center"},children:[n.jsx("div",{onClick:()=>M(null),style:{position:"absolute",inset:0}}),(0,n.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:430,height:"100%",maxHeight:820,padding:"16px 12px 96px",boxSizing:"border-box"},children:[n.jsx("div",{style:{position:"relative",width:"100%",height:"100%",borderRadius:32,overflow:"hidden",background:"#111827",boxShadow:"0 24px 60px rgba(0,0,0,0.6)"},children:(0,n.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(()=>{let e=Y(O);return e?n.jsx(s.default,{src:e,alt:O.name??"place",fill:!0,style:{objectFit:"cover"}}):null})(),n.jsx("button",{type:"button",onClick:()=>M(null),style:{position:"absolute",top:16,left:16,width:36,height:36,borderRadius:999,border:"none",background:"rgba(15,23,42,0.65)",color:"#f9fafb",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:"←"}),n.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),K(O.id)},style:{position:"absolute",top:16,right:16,width:36,height:36,borderRadius:999,border:"none",background:"rgba(15,23,42,0.65)",color:N(O.id)?"#f43f5e":"#f9fafb",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:18},children:N(O.id)?"♥":"♡"}),(0,n.jsxs)("div",{style:{position:"absolute",left:0,right:0,bottom:0,padding:"20px 20px 20px",background:"linear-gradient(180deg, rgba(15,23,42,0) 0%, rgba(15,23,42,0.85) 100%)"},children:[(0,n.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",padding:"6px 12px",borderRadius:999,background:"rgba(15,23,42,0.75)",color:"#f9fafb",fontSize:11,marginBottom:10},children:[O.name," \xb7"," ",O.categoryLabel??O.category]}),n.jsx("div",{style:{fontSize:14,color:"#e5e7eb"},children:O.mood?.[0]??O.moodText??""})]})]})}),n.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:16,display:"flex",justifyContent:"space-between",gap:10,padding:"0 20px",boxSizing:"border-box"},children:["길안내","예약\xb7자세히"].map(e=>n.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),V(O,e)},style:{flex:1,height:40,borderRadius:999,border:"none",background:"#f9fafb",color:"#111827",fontSize:13,fontWeight:800,cursor:"pointer"},children:e},e))})]})]}),!O&&n.jsx(d,{}),n.jsx(c,{})]})})}function k(){return n.jsx(i.Suspense,{fallback:n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#F8FAFC"},children:"로딩 중..."}),children:n.jsx(w,{})})}},9395:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>s});var n=r(9013);r(1);var i=r(3189);let a=(0,i.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_components\AuthSync.tsx#AuthSync`),o=(0,i.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#UIOverlayProvider`);(0,i.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#useUIOverlay`);let s={title:"HAMA",description:"하마 - 지역 기반 추천 서비스"};function l({children:e}){return n.jsx("html",{lang:"ko",children:(0,n.jsxs)("body",{style:{margin:0},children:[n.jsx(a,{}),n.jsx(o,{children:e})]})})}},1254:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(3189).createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\page.tsx#default`)},6952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(7201);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},1:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4522,679,7201,649,2181,8830],()=>r(5365));module.exports=n})();