"use strict";(()=>{var e={};e.id=1132,e.ids=[1132],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8293:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>A,requestAsyncStorage:()=>l,routeModule:()=>h,serverHooks:()=>k,staticGenerationAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{GET:()=>d,dynamic:()=>u});var s=r(3036),o=r(5736),n=r(5262),c=r(942);let u="force-dynamic",i=process.env.KAKAO_REST_API_KEY??"";async function p(e,t){let r=`https://dapi.kakao.com/v2/local${e}?${t.toString()}`,a=await fetch(r,{headers:{Authorization:`KakaoAK ${i}`},cache:"no-store"});if(!a.ok){let e=await a.text().catch(()=>"");throw console.error("[KAKAO] error",a.status,e),Error(`Kakao API error: ${a.status}`)}return a.json()}async function d(e){try{let{searchParams:t}=new URL(e.url),r=t.get("query"),a=t.get("category"),s=t.get("lat"),o=t.get("lng"),n=t.get("page")??"1",u=t.get("size")??"9";if(!a&&!r)return c.NextResponse.json({documents:[],message:"no query or category"},{status:200});if(a&&s&&o){let e=new URLSearchParams;e.set("category_group_code",a),e.set("x",o),e.set("y",s),e.set("radius","2000"),e.set("sort","distance"),e.set("page",n),e.set("size",u);let t=await p("/search/category.json",e);return c.NextResponse.json(t,{status:200})}let i=new URLSearchParams;i.set("query",r??""),a&&i.set("category_group_code",a),s&&o&&(i.set("x",o),i.set("y",s),i.set("radius","2000")),i.set("page",n),i.set("size",u);let d=await p("/search/keyword.json",i);return c.NextResponse.json(d,{status:200})}catch(e){return console.error("[KAKAO] search handler error",e),c.NextResponse.json({documents:[],error:"kakao search failed"},{status:500})}}i||console.warn("[KAKAO] KAKAO_REST_API_KEY 환경변수가 설정되어 있지 않습니다.");let h=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/kakao/search/route",pathname:"/api/kakao/search",filename:"route",bundlePath:"app/api/kakao/search/route"},resolvedPagePath:"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\api\\kakao\\search\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:k}=h,m="/api/kakao/search/route";function A(){return(0,n.patchFetch)({serverHooks:k,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4522,1746],()=>r(8293));module.exports=a})();