"use strict";(()=>{var e={};e.id=9320,e.ids=[9320],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1422:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>_,staticGenerationAsyncStorage:()=>x});var o={};t.r(o),t.d(o,{POST:()=>d});var s=t(3036),n=t(5736),a=t(5262),i=t(942),u=t(851);let p=process.env.NEXT_PUBLIC_SUPABASE_URL,c=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;async function d(e){try{let{user_id:r,store_id:t}=await e.json();if(!r||!t)return i.NextResponse.json({error:"user_id and store_id required"},{status:400});let o=p&&c?(0,u.eI)(p,c):null;if(!o)return i.NextResponse.json({ok:!0},{status:200});let{error:s}=await o.from("recent_views").upsert({user_id:r,store_id:t,viewed_at:new Date().toISOString()},{onConflict:"user_id,store_id",ignoreDuplicates:!1});if(s)return console.error("recent record error:",s),i.NextResponse.json({ok:!1,error:s.message},{status:500});return i.NextResponse.json({ok:!0},{status:200})}catch(e){return console.error("recent record error:",e),i.NextResponse.json({ok:!1,error:"record failed"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/recent/record/route",pathname:"/api/recent/record",filename:"route",bundlePath:"app/api/recent/record/route"},resolvedPagePath:"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\api\\recent\\record\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:x,serverHooks:_}=l,v="/api/recent/record/route";function f(){return(0,a.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:x})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[4522,1746,851],()=>t(1422));module.exports=o})();