(()=>{var e={};e.id=6729,e.ids=[6729],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},7316:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>c,pages:()=>p,routeModule:()=>m,tree:()=>d}),r(2279),r(9395),r(7824);var n=r(3282),o=r(5736),i=r(3906),a=r.n(i),s=r(6880),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let d=["",{children:["admin",{children:["stores",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2279)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\admin\\stores\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9395)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\admin\\stores\\page.tsx"],c="/admin/stores/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/admin/stores/page",pathname:"/admin/stores",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3204:(e,t,r)=>{Promise.resolve().then(r.bind(r,1567)),Promise.resolve().then(r.bind(r,9938))},5997:(e,t,r)=>{Promise.resolve().then(r.bind(r,2292))},9775:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},1567:(e,t,r)=>{"use strict";function n(){return null}r.d(t,{AuthSync:()=>n}),r(3677)},9938:(e,t,r)=>{"use strict";r.d(t,{A:()=>s,UIOverlayProvider:()=>a});var n=r(3227),o=r(3677);let i=(0,o.createContext)(null);function a({children:e}){let[t,r]=(0,o.useState)(!1),a=(0,o.useMemo)(()=>({overlayOpen:t,setOverlayOpen:r}),[t]);return n.jsx(i.Provider,{value:a,children:e})}function s(){let e=(0,o.useContext)(i);if(!e)throw Error("useUIOverlay must be used within UIOverlayProvider");return e}},2292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(3227),o=r(3677),i=r(649);function a(){let[e,t]=(0,o.useState)(""),[r,a]=(0,o.useState)([]),[s,l]=(0,o.useState)(!1),[d,p]=(0,o.useState)(""),[c,u]=(0,o.useState)([]),[m,x]=(0,o.useState)(!1),[f,h]=(0,o.useState)(null),[y,b]=(0,o.useState)(null),[g,v]=(0,o.useState)(!1),[j,S]=(0,o.useState)(null);(0,o.useRef)(null),(0,o.useRef)(null),(0,o.useCallback)(async e=>{l(!0);try{let t=await fetch(`/api/admin/stores?q=${encodeURIComponent(e)}&limit=30`),r=await t.json();a(r.stores??[])}catch{a([])}finally{l(!1)}},[]),(0,o.useCallback)(async e=>{x(!0);try{let t=await fetch(`/api/admin/users?q=${encodeURIComponent(e)}&limit=30`),r=await t.json();u(r.users??[])}catch{u([])}finally{x(!1)}},[]);let w=async()=>{if(f){v(!0),S(null);try{let e=await fetch(`/api/admin/stores/${f.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner_id:y})}),t=await e.json();if(!e.ok){S({type:"err",text:t.error||"저장 실패"});return}S({type:"ok",text:"저장했어요."}),h(e=>e?{...e,owner_id:y}:null)}catch{S({type:"err",text:"저장 중 오류"})}finally{v(!1)}}},P=async()=>{if(f){b(null),v(!0),S(null);try{let e=await fetch(`/api/admin/stores/${f.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({owner_id:null})}),t=await e.json();if(!e.ok){S({type:"err",text:t.error||"해제 실패"});return}S({type:"ok",text:"연결 해제했어요."}),h(e=>e?{...e,owner_id:null}:null)}catch{S({type:"err",text:"오류"})}finally{v(!1)}}};return(0,n.jsxs)("main",{style:{maxWidth:560,margin:"0 auto",padding:24,fontFamily:"Noto Sans KR, system-ui, sans-serif"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:24,flexWrap:"wrap",gap:12},children:[n.jsx("h1",{style:{margin:0,fontSize:20,fontWeight:800},children:"매장 \xb7 매장주 연결"}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[n.jsx(i.default,{href:"/admin",style:{fontSize:14,color:"#2563eb",textDecoration:"none"},children:"통계 대시보드"}),n.jsx("a",{href:"/partner",target:"_blank",rel:"noopener noreferrer",style:{fontSize:14,color:"#2563eb",textDecoration:"none",fontWeight:600},children:"매장주 대시보드"}),n.jsx(i.default,{href:"/admin/reservations",style:{fontSize:14,color:"#2563eb",textDecoration:"none"},children:"예약 목록"})]})]}),(0,n.jsxs)("section",{style:{marginBottom:24},children:[n.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#475569",marginBottom:8},children:"매장 검색"}),n.jsx("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"매장명 입력",style:{width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid #e2e8f0",fontSize:14,boxSizing:"border-box"}}),s&&n.jsx("div",{style:{fontSize:12,color:"#64748b",marginTop:6},children:"검색 중..."}),n.jsx("div",{style:{marginTop:10},children:r.slice(0,15).map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>{h(e),b(e.owner_id),p(""),u([]),S(null)},style:{display:"block",width:"100%",padding:"10px 12px",marginBottom:6,textAlign:"left",border:"1px solid #e2e8f0",borderRadius:10,background:f?.id===e.id?"#EFF6FF":"#fff",cursor:"pointer",fontSize:13},children:[n.jsx("span",{style:{fontWeight:600},children:e.name??"(이름 없음)"}),e.category&&n.jsx("span",{style:{color:"#64748b",marginLeft:8},children:e.category}),e.owner_id&&n.jsx("span",{style:{display:"block",fontSize:11,color:"#16a34a",marginTop:2},children:"연결됨"})]},e.id))})]}),f&&(0,n.jsxs)("section",{style:{padding:20,background:"#f8fafc",borderRadius:16,border:"1px solid #e2e8f0"},children:[n.jsx("div",{style:{fontSize:12,color:"#64748b",marginBottom:4},children:"선택한 매장"}),n.jsx("div",{style:{fontSize:16,fontWeight:700,marginBottom:16},children:f.name??"(이름 없음)"}),n.jsx("label",{style:{display:"block",fontSize:13,fontWeight:600,color:"#475569",marginBottom:8},children:"매장주(유저) 검색 후 선택"}),n.jsx("input",{type:"text",value:d,onChange:e=>p(e.target.value),placeholder:"닉네임 입력",style:{width:"100%",padding:"10px 12px",borderRadius:10,border:"1px solid #e2e8f0",fontSize:14,marginBottom:10,boxSizing:"border-box"}}),m&&n.jsx("div",{style:{fontSize:12,color:"#64748b",marginBottom:8},children:"검색 중..."}),n.jsx("div",{style:{marginBottom:12,maxHeight:200,overflowY:"auto"},children:c.map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>b(e.id),style:{display:"block",width:"100%",padding:"8px 12px",marginBottom:4,textAlign:"left",border:"none",borderRadius:8,background:y===e.id?"#DBEAFE":"#fff",cursor:"pointer",fontSize:13,boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[e.nickname??"(닉네임 없음)"," ",(0,n.jsxs)("span",{style:{fontSize:11,color:"#94a3b8"},children:["(",e.id.slice(0,8),"…)"]})]},e.id))}),j&&n.jsx("div",{style:{padding:10,borderRadius:8,marginBottom:12,background:"ok"===j.type?"#dcfce7":"#fee2e2",color:"ok"===j.type?"#166534":"#b91c1c",fontSize:13},children:j.text}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[n.jsx("button",{type:"button",onClick:w,disabled:g,style:{padding:"10px 18px",borderRadius:10,border:"none",background:"#2563eb",color:"#fff",fontSize:14,fontWeight:600,cursor:g?"not-allowed":"pointer"},children:g?"저장 중…":"연결 저장"}),n.jsx("button",{type:"button",onClick:P,disabled:g,style:{padding:"10px 18px",borderRadius:10,border:"1px solid #e2e8f0",background:"#fff",color:"#64748b",fontSize:14,cursor:g?"not-allowed":"pointer"},children:"연결 해제"})]})]}),(0,n.jsxs)("p",{style:{fontSize:12,color:"#94a3b8",marginTop:24},children:['매장을 검색해 선택한 뒤, 매장주로 연결할 유저를 검색해 선택하고 "연결 저장"을 누르세요. 위 "매장주 대시보드" 링크로 이동한 뒤 ',n.jsx("strong",{children:"카카오 로그인"}),"하면, 그 계정에 연결된 매장의 통계를 볼 수 있어요."]})]})}},2279:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(3189).createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\admin\stores\page.tsx#default`)},9395:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>s});var n=r(9013);r(1);var o=r(3189);let i=(0,o.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_components\AuthSync.tsx#AuthSync`),a=(0,o.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#UIOverlayProvider`);(0,o.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#useUIOverlay`);let s={title:"HAMA",description:"하마 - 지역 기반 추천 서비스"};function l({children:e}){return n.jsx("html",{lang:"ko",children:(0,n.jsxs)("body",{style:{margin:0},children:[n.jsx(i,{}),n.jsx(a,{children:e})]})})}},6952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(7201);let o=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},1:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4522,679,7201,649],()=>r(7316));module.exports=n})();