(()=>{var e={};e.id=1729,e.ids=[1729],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},4942:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(3863),r(9395),r(7824);var s=r(3282),a=r(5736),n=r(3906),i=r.n(n),l=r(6880),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["admin",{children:["reservations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3863)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\admin\\reservations\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9395)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\admin\\reservations\\page.tsx"],p="/admin/reservations/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/reservations/page",pathname:"/admin/reservations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3204:(e,t,r)=>{Promise.resolve().then(r.bind(r,1567)),Promise.resolve().then(r.bind(r,9938))},466:(e,t,r)=>{Promise.resolve().then(r.bind(r,6494))},9775:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},1567:(e,t,r)=>{"use strict";function s(){return null}r.d(t,{AuthSync:()=>s}),r(3677)},9938:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,UIOverlayProvider:()=>i});var s=r(3227),a=r(3677);let n=(0,a.createContext)(null);function i({children:e}){let[t,r]=(0,a.useState)(!1),i=(0,a.useMemo)(()=>({overlayOpen:t,setOverlayOpen:r}),[t]);return s.jsx(n.Provider,{value:i,children:e})}function l(){let e=(0,a.useContext)(n);if(!e)throw Error("useUIOverlay must be used within UIOverlayProvider");return e}},6494:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(3227),a=r(3677),n=r(1043);function i(){let e=(0,n.useRouter)(),t=async()=>{await fetch("/api/admin/logout",{method:"POST"}),e.replace("/admin/login")};return(0,s.jsxs)("div",{className:"flex justify-end items-center gap-3 mb-4",children:[s.jsx("a",{href:"/admin",className:"text-sm text-blue-600 hover:underline",children:"통계 대시보드"}),s.jsx("a",{href:"/admin/stores",className:"text-sm text-blue-600 hover:underline",children:"매장 연결"}),s.jsx("button",{onClick:t,className:"rounded-md border px-3 py-1.5 text-sm hover:bg-gray-50",title:"관리자 로그아웃",children:"로그아웃"})]})}let l=e=>{try{let t=new Date(e),r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${r}. ${s}. ${a}. ${n}:${i}`}catch{return e}};function o(){let e=(0,n.useSearchParams)(),[t,r]=(0,a.useState)([]),[o,d]=(0,a.useState)(!1),[c,p]=(0,a.useState)(""),m=(0,a.useMemo)(()=>{let t=t=>(e?.get(t)??"").trim(),r={store:t("store"),address:t("addr"),phone:t("phone"),name:t("name"),people:t("people"),date:t("date"),time:t("time"),note:t("note"),x:t("x"),y:t("y")};return Object.values(r).some(e=>e)?r:null},[e]),x=async()=>{d(!0);try{let e=await fetch("/api/reservations",{method:"GET"}),t=await e.json();e.ok&&t?.ok?r(t.items||[]):(console.error(t),alert("목록을 불러오지 못했습니다."))}catch(e){console.error(e),alert("목록 조회 중 오류가 발생했습니다.")}finally{d(!1)}},h=(0,a.useMemo)(()=>{if(!c.trim())return t;let e=c.trim().toLowerCase();return t.filter(t=>[t.id,t.store,t.address,t.phone,t.name,t.note??"",t.date,t.time].join(" ").toLowerCase().includes(e))},[t,c]),u=async e=>{if(confirm("정말 삭제할까요?"))try{let t=await fetch(`/api/reservations/${e}`,{method:"DELETE"}),s=await t.json();if(!t.ok||!s?.ok){alert("삭제 실패");return}r(t=>t.filter(t=>t.id!==e))}catch(e){console.error(e),alert("삭제 중 오류가 발생했습니다.")}},y=async()=>{if(!m)return;let e=`가게명: ${m.store||"-"}
주소: ${m.address||"-"}
전화: ${m.phone||"-"}
좌표: ${m.y||"-"}, ${m.x||"-"}`;await navigator.clipboard.writeText(e),alert("복사 완료!")},v=async()=>{if(m)try{let e={store:m.store||"-",address:m.address||"-",phone:m.phone||"-",name:m.name||"하마자동등록",people:Number(m.people||1),date:m.date||new Date().toISOString().slice(0,10),time:m.time||"12:00",note:m.note||"",lat:m.y?Number(m.y):null,lng:m.x?Number(m.x):null},t=await fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok||!r?.ok){alert("예약 생성 실패");return}alert("예약 정보가 DB에 등록되었습니다!"),x()}catch(e){console.error(e),alert("예약 생성 중 오류가 발생했습니다.")}};return(0,s.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-6",children:[s.jsx(i,{}),s.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"예약 내역"}),(0,s.jsxs)("div",{className:"mb-6 rounded-lg border p-4",children:[s.jsx("div",{className:"mb-2 flex items-center gap-2",children:s.jsx("span",{className:"text-sky-600",children:"\uD83D\uDC99 지도에서 전달된 예약 정보"})}),(0,s.jsxs)("div",{className:"text-sm leading-6 text-gray-700",children:[(0,s.jsxs)("div",{children:["가게명: ",m?.store||"-"]}),(0,s.jsxs)("div",{children:["주소: ",m?.address||"-"]}),(0,s.jsxs)("div",{children:["전화: ",m?.phone||"-"]}),(0,s.jsxs)("div",{children:["좌표: ",m?.y||"-",", ",m?.x||"-"]})]}),(0,s.jsxs)("div",{className:"mt-3 flex gap-2",children:[s.jsx("button",{onClick:y,className:"rounded-md bg-gray-700 px-3 py-2 text-sm text-white hover:opacity-90",children:"한 번에 복사"}),s.jsx("button",{onClick:v,className:"rounded-md bg-green-600 px-3 py-2 text-sm text-white hover:opacity-90",children:"⚡ 자동 등록(실제)"})]})]}),(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[s.jsx("input",{value:c,onChange:e=>p(e.target.value),placeholder:"검색: 가게명/주소/전화/이름/비고/날짜/시간…",className:"w-full rounded-md border px-3 py-2 text-sm"}),s.jsx("button",{onClick:x,className:"whitespace-nowrap rounded-md border px-3 py-2 text-sm hover:bg-gray-50",children:"\uD83D\uDD04 조회"})]}),s.jsx("div",{className:"overflow-x-auto rounded-lg border",children:(0,s.jsxs)("table",{className:"min-w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gray-50 text-gray-700",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-3 py-2",children:"ID"}),s.jsx("th",{className:"px-3 py-2",children:"생성일"}),s.jsx("th",{className:"px-3 py-2",children:"가게명"}),s.jsx("th",{className:"px-3 py-2",children:"주소"}),s.jsx("th",{className:"px-3 py-2",children:"전화"}),s.jsx("th",{className:"px-3 py-2",children:"예약자"}),s.jsx("th",{className:"px-3 py-2",children:"인원"}),s.jsx("th",{className:"px-3 py-2",children:"예약일"}),s.jsx("th",{className:"px-3 py-2",children:"시간"}),s.jsx("th",{className:"px-3 py-2",children:"비고"}),s.jsx("th",{className:"px-3 py-2",children:"삭제"})]})}),(0,s.jsxs)("tbody",{children:[o&&s.jsx("tr",{children:s.jsx("td",{colSpan:11,className:"px-3 py-6 text-center text-gray-500",children:"불러오는 중…"})}),!o&&0===h.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:11,className:"px-3 py-6 text-center text-gray-500",children:"아직 데이터가 없습니다. 상단에서 “자동 등록(실제)”을 눌러 생성해보세요."})}),!o&&h.map(e=>(0,s.jsxs)("tr",{className:"border-t",children:[s.jsx("td",{className:"px-3 py-2",children:e.id}),s.jsx("td",{className:"px-3 py-2",children:l(e.createdAt)}),s.jsx("td",{className:"px-3 py-2",children:e.store}),s.jsx("td",{className:"px-3 py-2",children:e.address}),s.jsx("td",{className:"px-3 py-2",children:e.phone}),s.jsx("td",{className:"px-3 py-2",children:e.name}),s.jsx("td",{className:"px-3 py-2",children:e.people}),s.jsx("td",{className:"px-3 py-2",children:e.date}),s.jsx("td",{className:"px-3 py-2",children:e.time}),s.jsx("td",{className:"px-3 py-2",children:e.note||""}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("button",{onClick:()=>u(e.id),className:"rounded-md bg-rose-500 px-2 py-1 text-xs text-white hover:opacity-90",children:"삭제"})})]},e.id))]})]})})]})}},1043:(e,t,r)=>{"use strict";var s=r(2854);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},3863:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(9013),a=r(6321),n=r(3189);(0,n.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\admin\reservations\ReservationsClient.tsx#dynamic`);let i=(0,n.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\admin\reservations\ReservationsClient.tsx#default`);function l(){return s.jsx(a.Suspense,{fallback:s.jsx("div",{style:{padding:24},children:"예약 목록 불러오는 중..."}),children:s.jsx(i,{})})}},9395:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>l});var s=r(9013);r(1);var a=r(3189);let n=(0,a.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_components\AuthSync.tsx#AuthSync`),i=(0,a.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#UIOverlayProvider`);(0,a.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#useUIOverlay`);let l={title:"HAMA",description:"하마 - 지역 기반 추천 서비스"};function o({children:e}){return s.jsx("html",{lang:"ko",children:(0,s.jsxs)("body",{style:{margin:0},children:[s.jsx(n,{}),s.jsx(i,{children:e})]})})}},6952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(7201);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},1:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4522,679,7201],()=>r(4942));module.exports=s})();