(()=>{var e={};e.id=2797,e.ids=[2797],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},5925:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>f,originalPathname:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d}),r(6460),r(9395),r(7824);var n=r(3282),a=r(5736),i=r(3906),s=r.n(i),o=r(6880),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6460)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\search\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9395)),"C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7824,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6952))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\ubtj1\\hama-frontend\\apps\\hama\\app\\search\\page.tsx"],c="/search/page",f={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3204:(e,t,r)=>{Promise.resolve().then(r.bind(r,1567)),Promise.resolve().then(r.bind(r,9938))},5422:(e,t,r)=>{Promise.resolve().then(r.bind(r,7588))},9775:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},1567:(e,t,r)=>{"use strict";function n(){return null}r.d(t,{AuthSync:()=>n}),r(3677)},9990:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var n=r(3677),a=r(2500),i=r(6974);function s(){let[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(!1),o=(0,i.n)(),l=(0,n.useCallback)(async()=>{if(!(!o||o.startsWith("server"))){s(!0);try{let e=await fetch(`/api/recent?user_id=${encodeURIComponent(o)}&limit=20`),r=(await e.json()).stores??[];t(r.map(e=>(0,a.O)(e)))}catch{t([])}finally{s(!1)}}},[o]);return{recentCards:e,loading:r,recordView:(0,n.useCallback)(async e=>{if(!(!o||o.startsWith("server")))try{await fetch("/api/recent/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:o,store_id:e})}),await l()}catch{}},[o,l]),refetch:l}}},7814:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var n=r(3677),a=r(2500),i=r(6974);function s(){let[e,t]=(0,n.useState)(new Set),[r,s]=(0,n.useState)([]),[o,l]=(0,n.useState)(!1),d=(0,i.n)(),u=(0,n.useCallback)(async()=>{if(!(!d||d.startsWith("server"))){l(!0);try{let e=await fetch(`/api/saved?user_id=${encodeURIComponent(d)}`),r=await e.json();t(new Set(r.saved_ids??[])),s((r.stores??[]).map(e=>(0,a.O)(e)))}catch{t(new Set),s([])}finally{l(!1)}}},[d]),c=(0,n.useCallback)(async r=>{if(!d||d.startsWith("server"))return!1;let n=e.has(r);t(e=>{let t=new Set(e);return n?t.delete(r):t.add(r),t});try{let e=await fetch("/api/saved",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:d,store_id:r})}),a=await e.json();if(!a.ok)return t(e=>{let t=new Set(e);return n?t.add(r):t.delete(r),t}),n;return a.saved}catch{return t(e=>{let t=new Set(e);return n?t.add(r):t.delete(r),t}),n}},[d,e]),f=(0,n.useCallback)(t=>e.has(t),[e]);return{savedIds:e,savedCards:r,loading:o,toggleSaved:c,isSaved:f,refetch:u}}},4389:(e,t,r)=>{"use strict";function n(){return""}r.d(t,{Z:()=>n})},6974:(e,t,r)=>{"use strict";function n(){return"server"}r.d(t,{n:()=>n}),r(4389)},9938:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,UIOverlayProvider:()=>s});var n=r(3227),a=r(3677);let i=(0,a.createContext)(null);function s({children:e}){let[t,r]=(0,a.useState)(!1),s=(0,a.useMemo)(()=>({overlayOpen:t,setOverlayOpen:r}),[t]);return n.jsx(i.Provider,{value:s,children:e})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useUIOverlay must be used within UIOverlayProvider");return e}},2500:(e,t,r)=>{"use strict";function n(e){let t=String(e??"").toLowerCase().trim();return"beauty"===t?"salon":"fd6"===t?"restaurant":"ce7"===t?"cafe":"bk9"===t?"salon":"at4"===t?"activity":t.includes("미용")||t.includes("헤어")||t.includes("이발")?"salon":t.includes("카페")||t.includes("커피")?"cafe":t.includes("식당")||t.includes("음식")||t.includes("레스토랑")||t.includes("맛집")?"restaurant":t.includes("액티비")||t.includes("활동")||t.includes("체험")||t.includes("공원")?"activity":"restaurant"===t||"cafe"===t||"salon"===t||"activity"===t?t:"restaurant"}function a(e){let t=String(e?.id??e?.store_id??e?.storeId??"").trim(),r=String(e?.name??e?.store_name??e?.storeName??"").trim(),a=n(e?.category??e?.categoryNorm??e?.category_norm??e?.tab??e?.type??e?.kind),i=String(e?.categoryLabel??e?.category_label??function(e){let t=n(e);return"restaurant"===t?"식당":"cafe"===t?"카페":"salon"===t?"미용실":"액티비티"}(a)),s=Number(e?.distanceKm??e?.distance_km??("number"==typeof e?.distance?e.distance/1e3:void 0)),o=Number.isFinite(s)?s:0,l=String(e?.cover_image_url??e?.imageUrl??e?.image_url??e?.image??e?.thumbnail??e?.thumb??""),d="number"==typeof e?.lat?e.lat:"number"==typeof e?.latitude?e.latitude:e?.lat??e?.latitude??null,u="number"==typeof e?.lng?e.lng:"number"==typeof e?.longitude?e.longitude:e?.lng??e?.longitude??null;return{id:t,name:r,category:a,categoryLabel:i,distanceKm:o,moodText:String(e?.moodText??e?.mood_text??e?.mood??""),imageUrl:l,quickQuery:String(e?.quickQuery??e?.quick_query??r),lat:d,lng:u,mood:e?.mood??null,withKids:e?.withKids??e?.with_kids??null,forWork:e?.forWork??e?.for_work??null,priceLevel:e?.priceLevel??e?.price_level??null,tags:e?.tags??null}}r.d(t,{O:()=>a})},7822:(e,t,r)=>{"use strict";var n=r(8830);let a=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://placeholder.supabase.co",i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"placeholder";(0,n.eI)(a,i)},7588:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var n=r(3227),a=r(3677),i=r(1043),s=r(9101);function o(e){return"cafe"===e?"카페":"restaurant"===e?"식당":"salon"===e?"미용실":"액티비티"}function l(e){return"restaurant"===e?"/images/category/restaurant.jpg":"cafe"===e?"/images/category/cafe.jpg":"salon"===e?"/images/category/salon.jpg":"/images/category/activity.jpg"}function d(e){let{query:t,hasMyLocation:r,usedChineseFallback:a=!1,pageIndex:i,pages:d,selected:u,others:c,swipeDirection:f,onBack:m,onOpenExpanded:p,onOpenKakaoPlace:g,onGoToPage:h,onTouchStart:y,onTouchEnd:b}=e,x=!!u;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{width:"100%",maxWidth:430,marginTop:0,maxHeight:60,overflow:"hidden",display:"flex",alignItems:"center"},children:[n.jsx("button",{onClick:m,style:{border:"none",background:"#ffffff",borderRadius:12,padding:"8px 10px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",cursor:"pointer"},children:"⬅️"}),n.jsx("div",{style:{flex:1,marginLeft:8,padding:"8px 12px",borderRadius:9999,background:"#ffffff",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.08)",fontSize:13,color:"#4b5563",fontFamily:"Noto Sans KR, system-ui, sans-serif",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t?`“${t}” 검색 결과${x?` \xb7 ${o(u.categoryNorm)}`:""}${a?" (중국집 태그된 곳이 없어 주변 식당)":""}${r?" \xb7 내 위치 기준":""}`:"하마 추천 장소"})]}),(0,n.jsxs)("div",{onTouchStart:y,onTouchEnd:b,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,transform:"left"===f?"translateX(-16px)":"right"===f?"translateX(16px)":"translateX(0)",transition:"transform 0.22s ease-out"},children:[x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{onClick:()=>p(u.id),style:{width:316,height:269,borderRadius:24,overflow:"hidden",position:"relative",boxShadow:"0 6px 18px rgba(0, 0, 0, 0.2)",cursor:"pointer",background:"#dbeafe"},children:[n.jsx(s.default,{src:u.image_url||l(u.categoryNorm),alt:u.name,fill:!0,sizes:"316px",style:{objectFit:"cover"}}),(0,n.jsxs)("button",{onClick:e=>{e.stopPropagation(),g(u)},style:{position:"absolute",top:10,right:10,border:"none",borderRadius:9999,padding:"6px 10px",background:"rgba(255,255,255,0.95)",cursor:"pointer",fontSize:12,fontFamily:"Noto Sans KR, system-ui, sans-serif",boxShadow:"0 6px 18px rgba(0,0,0,0.18)"},children:[o(u.categoryNorm),"정보보기"]}),(0,n.jsxs)("div",{style:{position:"absolute",left:12,bottom:12,padding:"6px 10px",borderRadius:9999,background:"rgba(15,23,42,0.75)",color:"#f9fafb",fontSize:12,fontFamily:"Noto Sans KR, system-ui, sans-serif"},children:[u.name," \xb7 ",o(u.categoryNorm),null!=u.distanceKm&&u.distanceKm<500?` \xb7 ${u.distanceKm.toFixed(1)}km`:""]})]}),n.jsx("div",{style:{display:"flex",gap:16,marginTop:8},children:c.slice(0,2).map(e=>(0,n.jsxs)("div",{onClick:()=>p(e.id),style:{width:156,height:165,borderRadius:24,overflow:"hidden",position:"relative",boxShadow:"0 6px 18px rgba(0, 0, 0, 0.2)",cursor:"pointer",background:"#dbeafe"},children:[n.jsx(s.default,{src:e.image_url||l(e.categoryNorm),alt:e.name,fill:!0,sizes:"156px",style:{objectFit:"cover"}}),(0,n.jsxs)("button",{onClick:t=>{t.stopPropagation(),g(e)},style:{position:"absolute",top:8,right:8,border:"none",borderRadius:9999,padding:"5px 8px",background:"rgba(255,255,255,0.95)",cursor:"pointer",fontSize:11,fontFamily:"Noto Sans KR, system-ui, sans-serif",boxShadow:"0 6px 18px rgba(0,0,0,0.18)"},children:[o(e.categoryNorm),"정보보기"]}),(0,n.jsxs)("div",{style:{position:"absolute",left:10,bottom:10,padding:"4px 8px",borderRadius:9999,background:"rgba(15,23,42,0.75)",color:"#f9fafb",fontFamily:"Noto Sans KR, system-ui, sans-serif",fontSize:11},children:[e.name,null!=e.distanceKm&&e.distanceKm<500?` \xb7 ${e.distanceKm.toFixed(1)}km`:""]})]},e.id))})]}):n.jsx("div",{style:{width:316,height:269,borderRadius:24,overflow:"hidden",position:"relative",boxShadow:"0 6px 18px rgba(0, 0, 0, 0.18)",background:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Noto Sans KR, system-ui, sans-serif",color:"#6b7280",fontSize:14},children:"하마가 학습 중이에요"}),n.jsx("div",{style:{marginTop:16,display:"flex",gap:8},children:[0,1,2].map(e=>{let t=(d?.[e]?.length??0)>0;return n.jsx("button",{onClick:()=>h(e),disabled:!t,style:{width:10,height:10,borderRadius:"50%",border:"none",cursor:t?"pointer":"default",background:t?e===i?"#2563eb":"rgba(148,163,184,0.7)":"rgba(209,213,219,0.8)",transform:e===i&&t?"scale(1.2)":"scale(1)",transition:"background 0.2s ease, transform 0.2s ease"},"aria-label":`page-${e+1}`},e)})})]})]})}function u(e){return"cafe"===e?"카페":"restaurant"===e?"식당":"salon"===e?"미용실":"액티비티"}function c(e){var t;let{visible:r,expanded:a,reserveStep:i,reserveDate:o,reserveTime:l,selected:d,onClose:c,onOpenKakaoPlace:f,onGoToMap:m,onOverlayScroll:p,setReserveDate:g,setReserveTime:h,isSaved:y,onToggleSaved:b}=e;if(!r||!d)return null;let x=e=>{try{window.open(e,"_blank","noopener,noreferrer")}catch{}},v=e=>{let t=encodeURIComponent(e);x(`https://search.naver.com/search.naver?query=${t}`)};return n.jsx("div",{onScroll:p,style:{position:"fixed",inset:0,zIndex:3e3,background:"rgba(15,23,42,0.75)",backdropFilter:"blur(6px)",overflowY:"auto",opacity:a?1:0,transition:"opacity 0.28s ease"},children:(0,n.jsxs)("div",{style:{minHeight:"100vh",padding:"24px 12px 32px",display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},children:[(0,n.jsxs)("div",{style:{width:"100%",maxWidth:430,height:"calc(100vh - 150px)",borderRadius:26,overflow:"hidden",position:"relative",boxShadow:"0 14px 40px rgba(0, 0, 0, 0.55)",background:"#000",opacity:a?1:0,transform:a?"translateY(0) scale(1)":"translateY(40px) scale(0.95)",transition:"opacity 0.3s ease, transform 0.3s ease"},children:[n.jsx(s.default,{src:d.image_url||("restaurant"===(t=d.categoryNorm)?"/images/category/restaurant.jpg":"cafe"===t?"/images/category/cafe.jpg":"salon"===t?"/images/category/salon.jpg":"/images/category/activity.jpg"),alt:d.name,fill:!0,sizes:"430px",style:{objectFit:"cover"}}),n.jsx("button",{onClick:c,style:{position:"absolute",top:10,left:10,width:32,height:32,borderRadius:"9999px",border:"none",background:"rgba(15,23,42,0.8)",color:"#f9fafb",cursor:"pointer",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.4)"},children:"←"}),b&&d&&n.jsx("button",{onClick:()=>b(d.id),style:{position:"absolute",top:10,right:10,width:32,height:32,borderRadius:"9999px",border:"none",background:"rgba(15,23,42,0.8)",color:y?.(d.id)?"#f43f5e":"#f9fafb",cursor:"pointer",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.4)",fontSize:16},children:y?.(d.id)?"♥":"♡"}),(0,n.jsxs)("button",{onClick:()=>f(d),style:{position:"absolute",top:10,right:10,border:"none",borderRadius:9999,padding:"7px 12px",background:"rgba(255,255,255,0.95)",cursor:"pointer",fontSize:12,fontFamily:"Noto Sans KR, system-ui, sans-serif",boxShadow:"0 10px 28px rgba(0,0,0,0.25)"},children:[u(d.categoryNorm),"정보보기"]}),(0,n.jsxs)("div",{style:{position:"absolute",left:14,bottom:18,padding:"6px 12px",borderRadius:9999,background:"rgba(15,23,42,0.8)",color:"#f9fafb",fontSize:13,fontFamily:"Noto Sans KR, system-ui, sans-serif"},children:[d.name," \xb7 ",u(d.categoryNorm),null!=d.distanceKm?` \xb7 ${d.distanceKm.toFixed(1)}km`:""]})]}),(0,n.jsxs)("div",{style:{width:"100%",maxWidth:430,display:"flex",justifyContent:"space-between",gap:10,marginTop:14,opacity:a?1:0,transform:a?"translateY(0)":"translateY(24px)",transition:"opacity 0.3s ease 0.03s, transform 0.3s ease 0.03s"},children:[n.jsx("button",{type:"button",onClick:()=>m(d),style:{flex:1,border:"none",borderRadius:9999,padding:"11px 0",background:"#f3f4f6",fontSize:14,fontFamily:"Noto Sans KR, system-ui, sans-serif",cursor:"pointer",color:"#111827",fontWeight:800},children:"길안내"}),n.jsx("button",{type:"button",onClick:()=>v(d.name),style:{flex:1,border:"none",borderRadius:9999,padding:"11px 0",background:"#f3f4f6",fontSize:14,fontFamily:"Noto Sans KR, system-ui, sans-serif",cursor:"pointer",color:"#111827",fontWeight:800},children:"네이버로 보기"})]}),i>0&&n.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:126,display:"flex",justifyContent:"center",pointerEvents:"auto"},children:(0,n.jsxs)("div",{style:{width:"100%",maxWidth:430,borderRadius:24,background:"#f9fafb",boxShadow:"0 10px 28px rgba(15,23,42,0.45)",padding:"14px 16px 16px",fontFamily:"Noto Sans KR, system-ui, sans-serif",fontSize:13,color:"#111827"},children:[1===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{marginBottom:8,fontWeight:600,fontSize:14},children:[d.name," 예약하기"]}),n.jsx("div",{style:{marginBottom:12,color:"#4b5563",fontSize:12},children:"날짜와 시간을 선택해 주세요. (베타 테스트 화면)"}),(0,n.jsxs)("div",{style:{marginBottom:10},children:[n.jsx("div",{style:{fontSize:12,marginBottom:6,color:"#6b7280"},children:"날짜 선택"}),n.jsx("div",{style:{display:"flex",gap:8},children:[{label:"오늘",value:"오늘"},{label:"내일",value:"내일"},{label:"모레",value:"모레"}].map(e=>n.jsx("button",{type:"button",onClick:()=>g(e.value),style:{flex:1,borderRadius:9999,border:"none",padding:"6px 0",fontSize:12,cursor:"pointer",background:o===e.value?"#2563eb":"#e5e7eb",color:o===e.value?"#ffffff":"#111827"},children:e.label},e.value))})]}),(0,n.jsxs)("div",{children:[n.jsx("div",{style:{fontSize:12,marginBottom:6,color:"#6b7280"},children:"시간 선택"}),n.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:["11:00","13:00","15:00","17:00","19:00"].map(e=>n.jsx("button",{type:"button",onClick:()=>h(e),style:{flexBasis:"30%",borderRadius:9999,border:"none",padding:"6px 0",fontSize:12,cursor:"pointer",background:l===e?"#2563eb":"#e5e7eb",color:l===e?"#ffffff":"#111827",textAlign:"center"},children:e},e))})]})]}),2===i&&(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{style:{marginBottom:8,fontWeight:600,fontSize:14},children:"예약이 완료된 것처럼 보여주는 화면입니다"}),(0,n.jsxs)("div",{style:{marginBottom:10,color:"#4b5563",fontSize:12},children:["베타 테스트용으로 ",(0,n.jsxs)("b",{children:[o," ",l]}),"에 예약한 것처럼 표시돼요."]}),(0,n.jsxs)("div",{style:{padding:"8px 10px",borderRadius:12,background:"#e5f2ff",fontSize:12,color:"#1f2937"},children:["• 매장: ",d.name,n.jsx("br",{}),"• 날짜: ",o,n.jsx("br",{}),"• 시간: ",l]})]})]})})]})})}function f(e){return String(e??"").toLowerCase().replace(/\s+/g,"").trim()}function m(e){let t="number"==typeof e?e:Number(e);return Number.isFinite(t)?t:null}r(7822);var p=r(9990),g=r(7814),h=r(9938);function y(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),r=t.get("query")||"",s=t.get("category"),o=Number(t.get("lat")),l=Number(t.get("lng")),u=Number.isFinite(o)&&Number.isFinite(l),y=(0,a.useMemo)(()=>{let e=String(s??"").trim(),t=e.toLowerCase();if(e&&("all"===t||"total"===t||"종합"===e))return null;if(s){let t=function(e){if(!e)return null;let t=String(e).trim(),r=t.toLowerCase();return"cafe"===r||"restaurant"===r||"salon"===r||"activity"===r?r:"CE7"===t?"cafe":"FD6"===t?"restaurant":"BK9"===t||"beauty"===r?"salon":null}(e);if(t)return t}return r.trim()?function(e){let t=String(e??"").toLowerCase();return t.includes("미용")||t.includes("헤어")||t.includes("뷰티")||t.includes("살롱")||t.includes("salon")||t.includes("beauty")?"salon":t.includes("식당")||t.includes("밥")||t.includes("한식")||t.includes("레스토랑")||t.includes("맛집")||t.includes("중국집")||t.includes("중국")||t.includes("중식")||t.includes("일식")||t.includes("양식")||t.includes("한정식")||t.includes("혼밥")||t.includes("점심식사")||t.includes("회식")||t.includes("점심")?"restaurant":t.includes("박물관")||t.includes("공원")||t.includes("체험")||t.includes("활동")||t.includes("놀")||t.includes("키즈")?"activity":"cafe"}(r):null},[s,r]),{stores:b,loading:x}=function(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[i,s]=(0,a.useState)(null);return{stores:e,loading:r,errorMsg:i}}(),{categoryStores:v,pages:S,usedChineseFallback:j}=function(e){let{stores:t,activeCategory:r,query:n,hasMyLocation:i,myLat:s,myLng:o,exploreMode:l=!0,radiusKm:d=3}=e;return(0,a.useMemo)(()=>{let e=function(e,t){let r=String(e??"").toLowerCase().trim();if(!r)return[];let n=new Set(["카페","cafe","식당","restaurant","미용","미용실","beauty","salon","활동","액티비티","activity"].map(e=>f(e))),a=f(r);if(n.has(a))return[];let i=r.split(/[\s/|,.;:!?()\[\]{}"'`~@#$%^&*+=<>\\_-]+/g).map(e=>e.trim()).filter(Boolean),s=new Set(["근처","가까운","가까이","찾아줘","찾아","추천","알려줘","뭐","먹지","먹을까","오늘","내일","요즘","해줘","해","좀","아","그","이","저"]),o=new Set;"cafe"===t&&o.add("카페"),"restaurant"===t&&o.add("식당"),"salon"===t&&o.add("미용실"),"activity"===t&&o.add("액티비티");let l=i.filter(e=>!s.has(e)).filter(e=>!o.has(e)).map(e=>f(e)).filter(e=>e.length>=2),d={china:e=>e.includes("중국")||"중식"===e||e.includes("짜장")||e.includes("짬뽕"),korean:e=>e.includes("한정식")||"한식"===e||e.includes("정식"),solo:e=>e.includes("혼밥")||e.includes("혼자")||"1인"===e,lunch:e=>e.includes("점심")||e.includes("런치")||e.includes("브런치"),company:e=>e.includes("회식")||e.includes("단체")||e.includes("모임")};for(let[e,t]of Object.entries({china:["중국집","중국","중식","짜장","짬뽕","짜장면","탕수","마라","훠궈","딤섬","양꼬치"],korean:["한정식","한식","코스","정식","가족식사","단체가능","코다리","명태","보양식"],solo:["혼밥","혼자","1인","1인석","단독","혼술"],lunch:["점심","점심맛집","점심식사","런치","브런치","가성비","메뉴"],company:["회식","단체","모임","룸","10인","20인","단체가능","회의"]})){let r=d[e];if(l.some(r)){l=Array.from(new Set([...l,...t]));break}}return Array.from(new Set(l))}(n,r),a=(t??[]).map(e=>{let t=function(e){let t=String(e??"").trim(),r=t.toLowerCase();return"cafe"===r||"restaurant"===r||"salon"===r||"activity"===r?r:"beauty"===r?"salon":"CE7"===t?"cafe":"FD6"===t?"restaurant":"BK9"===t?"salon":"카페"===t?"cafe":"식당"===t?"restaurant":"미용실"===t?"salon":"액티비티"===t||"활동"===t||"공원"===t||"박물관"===t?"activity":r.includes("cafe")||r.includes("카페")?"cafe":r.includes("restaurant")||r.includes("식당")||r.includes("fd6")||r.includes("중식")||r.includes("한식")||r.includes("양식")||r.includes("일식")?"restaurant":r.includes("salon")||r.includes("미용")||r.includes("beauty")||r.includes("bk9")?"salon":r.includes("activity")||r.includes("액티비티")||r.includes("활동")||r.includes("공원")||r.includes("박물관")?"activity":null}(e.category);if(!t)return null;let r=m(e.lat),n=m(e.lng),a=null;i&&null!=r&&null!=n&&(a=function(e,t,r,n){let a=Math.sin((r-e)*Math.PI/180/2)**2+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin((n-t)*Math.PI/180/2)**2;return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371}(s,o,r,n));let l=String(e.name??"").trim();return l?{...e,id:String(e.id??""),name:l,category:t,lat:r,lng:n,distanceKm:a}:null}).filter(e=>null!==e),u=a,c=e.some(e=>["회식","단체","모임","혼밥","혼자","점심","한정식","한식"].includes(e)),p=r||(c?"restaurant":null);p&&(u=u.filter(e=>e.category===p));let g=u,h="restaurant"===r&&e.some(e=>["중식","짜장","짬뽕","중국집","중국","탕수","마라","훠궈","딤섬","양꼬치","짜장면"].includes(e)),y="restaurant"===r&&e.some(e=>["한정식","한식","정식","코스"].includes(e)),b=e.some(e=>["혼밥","혼자","1인"].includes(e)),x=e.some(e=>["점심","런치","브런치"].includes(e)),v=e.some(e=>["회식","단체","모임"].includes(e)),S={china:["한정식","한식","국밥","백반","김치","삼겹","갈비","찌개","비빔","냉면","분식","족발","보쌈","코다리","명태","순대국","해장국"],korean:["중국집","중국","짬뽕","짜장","마라","훠궈","양꼬치","일식","초밥","라멘","양식","파스타","스테이크"],solo:["단체전용","10인이상","20인이상"],company:["혼밥전문","1인전용"]};u=u.filter(t=>{if(!e.length)return!0;let r=f(t.name??""),n=f(t.address??""),a=t.mood,i=Array.isArray(a)?f(a.join(" ")):f(a??""),s=t.tags,o=Array.isArray(s)?f(s.join(" ")):f(s??""),l=`${r} ${n} ${i} ${o}`;return!(h&&S.china.some(e=>l.includes(e))||y&&S.korean.some(e=>l.includes(e))||b&&S.solo.some(e=>l.includes(e))||v&&S.company.some(e=>l.includes(e)))&&e.some(e=>r.includes(e)||n.includes(e)||i.includes(e)||o.includes(e))});let j=!1;if(h&&0===u.length&&g.length>0){let e=["중국집","중국","중식","짜장","짬뽕","짜장면","탕수","마라","훠궈","딤섬","양꼬치"];j=(u=g.filter(t=>{let r=`${f(t.name??"")} ${f(t.address??"")} ${Array.isArray(t.mood)?f(t.mood.join(" ")):""} ${Array.isArray(t.tags)?f(t.tags.join(" ")):""}`;return e.some(e=>r.includes(e))})).length>0}if(y&&0===u.length&&g.length>0){let e=["한정식","한식","정식","코스","가족식사","단체가능","코다리","명태","뷔페"];u=g.filter(t=>{let r=`${f(t.name??"")} ${Array.isArray(t.tags)?f(t.tags.join(" ")):""} ${Array.isArray(t.mood)?f(t.mood.join(" ")):""}`;return e.some(e=>r.includes(e))})}if(v&&0===u.length&&g.length>0){let e=["회식","단체","모임","룸","단체가능"];0===(u=g.filter(t=>{let r=`${f(t.name??"")} ${Array.isArray(t.tags)?f(t.tags.join(" ")):""} ${Array.isArray(t.mood)?f(t.mood.join(" ")):""}`;return e.some(e=>r.includes(e))})).length&&(u=g)}if(b&&0===u.length&&g.length>0){let e=["혼밥","혼자","1인","1인석"];0===(u=g.filter(t=>{let r=`${f(t.name??"")} ${Array.isArray(t.tags)?f(t.tags.join(" ")):""} ${Array.isArray(t.mood)?f(t.mood.join(" ")):""}`;return e.some(e=>r.includes(e))})).length&&(u=g)}if(x&&0===u.length&&g.length>0){let e=["점심","점심맛집","점심식사","런치","브런치","가성비"];0===(u=g.filter(t=>{let r=`${f(t.name??"")} ${Array.isArray(t.tags)?f(t.tags.join(" ")):""}`;return e.some(e=>r.includes(e))})).length&&(u=g)}let w={china:["중국집","중국","중식","짜장","짬뽕","짜장면","탕수","마라","훠궈","딤섬","양꼬치"],korean:["한정식","한식","정식","코스","가족식사"],solo:["혼밥","혼자","1인","1인석"],lunch:["점심","점심맛집","점심식사","런치","브런치","가성비"],company:["회식","단체","모임","룸","단체가능"]},k=h?"china":y?"korean":b?"solo":x?"lunch":v?"company":null;if(k&&w[k]){let e=w[k],t=t=>{let r=`${f(t.name??"")} ${Array.isArray(t.tags)?f(t.tags.join(" ")):""} ${Array.isArray(t.mood)?f(t.mood.join(" ")):""}`;return e.filter(e=>r.includes(e)).length};u=u.sort((e,r)=>{let n=t(e),a=t(r);return a!==n?a-n:(e.distanceKm??Number.POSITIVE_INFINITY)-(r.distanceKm??Number.POSITIVE_INFINITY)})}else i&&(u=u.sort((e,t)=>(e.distanceKm??Number.POSITIVE_INFINITY)-(t.distanceKm??Number.POSITIVE_INFINITY)));let _=!1;if(l&&i){let e=u.filter(e=>(e.distanceKm??Number.POSITIVE_INFINITY)<=d);e.length>0?u=e:(_=!0,u=u.slice(0,200))}let C=u;if(0===C.length&&a.length>0&&!(h||y||b||v||x)){let t=a;r&&(t=t.filter(e=>e.category===r));let n=e.length>0?t.filter(t=>{let r=f(t.name??""),n=Array.isArray(t.tags)?f(t.tags.join(" ")):"";return e.some(e=>r.includes(e)||n.includes(e))}):t;C=n.length>0?n.slice(0,200):t.slice(0,200)}let P=[...C].sort(()=>Math.random()-.5),I=[P.slice(0,3),P.slice(3,6),P.slice(6,9)];return{categoryStores:P,pages:I,usedFallbackFar:_,usedChineseFallback:j}},[t,r,n,i,s,o,l,d])}({stores:b,activeCategory:y,query:r,hasMyLocation:u,myLat:o,myLng:l,radiusKm:15}),w=(0,a.useMemo)(()=>[Array.isArray(S?.[0])?S[0]:[],Array.isArray(S?.[1])?S[1]:[],Array.isArray(S?.[2])?S[2]:[]],[S]),[k,_]=(0,a.useState)(0),C=w[k]??[],[P,I]=(0,a.useState)(null),[A,N]=(0,a.useState)(!1),[R,$]=(0,a.useState)(!1),[T,F]=(0,a.useState)(!1),{recordView:K}=(0,p.X)(),{toggleSaved:O,isSaved:U}=(0,g.F)(),{setOverlayOpen:z}=(0,h.A)(),[M,E]=(0,a.useState)(0),[q,B]=(0,a.useState)(null),[L,W]=(0,a.useState)(null),D=()=>{E(0),B(null),W(null)},Y=(0,a.useRef)(null),[X,G]=(0,a.useState)(null),V=(0,a.useMemo)(()=>{if(P){let e=C.find(e=>e.id===P);if(e)return e}return C[0]??null},[C,P]),H=(0,a.useMemo)(()=>V?C.filter(e=>e.id!==V.id):C,[C,V]);(0,a.useMemo)(()=>{let e=y??"all",t=u?`${o.toFixed(5)},${l.toFixed(5)}`:"noloc";return`${r}__${e}__${t}`},[r,y,u,o,l]);let J=e=>{if(e<0||e>=w.length)return;let t=w[e];t&&0!==t.length&&(_(e),I(t[0].id),N(!1),$(!1),F(!1),D())},Q=e=>{encodeURIComponent(e.name)},Z=()=>{$(!1),F(!1),D(),setTimeout(()=>N(!1),280)};return x?n.jsx("main",{style:{minHeight:"100vh",background:"#eef5fb",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"Noto Sans KR, system-ui, sans-serif"},children:"불러오는 중..."}):(0,n.jsxs)("main",{style:{minHeight:"100vh",background:"#eef5fb",paddingTop:20,display:"flex",flexDirection:"column",alignItems:"center",gap:18},children:[!A&&n.jsx(d,{query:r,hasMyLocation:u,usedChineseFallback:j,pageIndex:k,pages:w,selected:V,others:H,swipeDirection:X,onBack:()=>e.push("/"),onOpenExpanded:e=>{I(e),K(e),F(!1),D(),$(!1),N(!0),setTimeout(()=>$(!0),10)},onOpenKakaoPlace:Q,onGoToPage:J,onTouchStart:e=>{Y.current=e.touches[0].clientX},onTouchEnd:e=>{let t=Y.current;if(null==t)return;let r=e.changedTouches[0].clientX-t;r>40?k>0&&(w[k-1]?.length??0)>0&&(G("right"),J(k-1),setTimeout(()=>G(null),220)):r<-40&&k<w.length-1&&(w[k+1]?.length??0)>0&&(G("left"),J(k+1),setTimeout(()=>G(null),220)),Y.current=null}}),n.jsx(c,{visible:A,expanded:R,detailOpen:T,reserveStep:M,reserveDate:q,reserveTime:L,selected:V,onClose:Z,onOpenKakaoPlace:Q,onGoToMap:t=>{let r=t.lat??"",n=t.lng??"";e.push(`/map?q=${encodeURIComponent(t.name)}&lat=${encodeURIComponent(String(r))}&lng=${encodeURIComponent(String(n))}`)},onReserveClick:()=>{if(F(!1),0===M){E(1);return}if(1===M){if(!q||!L){alert("날짜와 시간을 먼저 선택해 주세요 \uD83D\uDE42");return}E(2);return}2===M&&D()},onRate:()=>alert("평점 기능은 추후 버전에서 제공될 예정입니다!"),onToggleDetail:()=>{D(),F(e=>!e)},onOverlayScroll:e=>{!T&&0===M&&e.currentTarget.scrollTop>40&&Z()},setReserveDate:e=>B(e),setReserveTime:e=>W(e),isSaved:U,onToggleSaved:O})]})}},7701:(e,t,r)=>{"use strict";e.exports=r(8998).vendored.contexts.RouterContext},9395:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>o});var n=r(9013);r(1);var a=r(3189);let i=(0,a.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_components\AuthSync.tsx#AuthSync`),s=(0,a.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#UIOverlayProvider`);(0,a.createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\_providers\UIOverlayProvider.tsx#useUIOverlay`);let o={title:"HAMA",description:"하마 - 지역 기반 추천 서비스"};function l({children:e}){return n.jsx("html",{lang:"ko",children:(0,n.jsxs)("body",{style:{margin:0},children:[n.jsx(i,{}),n.jsx(s,{children:e})]})})}},6460:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,dynamic:()=>s});var n=r(9013),a=r(6321);let i=(0,r(3189).createProxy)(String.raw`C:\Users\ubtj1\hama-frontend\apps\hama\app\search\SearchPageClient.tsx#default`),s="force-dynamic";function o(){return n.jsx(a.Suspense,{fallback:n.jsx("div",{children:"로딩중..."}),children:n.jsx(i,{})})}},6952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(7201);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},1:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4522,679,7201,2181,8830],()=>r(5925));module.exports=n})();